var m=Object.defineProperty;var u=(a,s,t)=>s in a?m(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var o=(a,s,t)=>u(a,typeof s!="symbol"?s+"":s,t);import{r as l,j as e,c as g,R as j}from"./chunks/globals-DhEz86-d.js";const b=({onClose:a})=>{const[s,t]=l.useState(!1),[n,h]=l.useState("dashboard"),[d,c]=l.useState(!0);l.useEffect(()=>{chrome.storage.sync.get(["extensionEnabled"],r=>{c(r.extensionEnabled??!0)});const i=r=>{r.extensionEnabled&&c(r.extensionEnabled.newValue)};return chrome.storage.onChanged.addListener(i),()=>chrome.storage.onChanged.removeListener(i)},[]);const x=()=>{chrome.runtime.sendMessage({type:"TOGGLE_EXTENSION"},i=>{c(i.enabled)})};return s?e.jsx("div",{className:"chrome-extension-container w-12 h-12",children:e.jsx("button",{onClick:()=>t(!1),className:"w-full h-full bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center justify-center transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}):e.jsxs("div",{className:"chrome-extension-container w-80 max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Extension Panel"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(!0),className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{className:"flex space-x-1 mt-3",children:[{id:"dashboard",label:"Dashboard",icon:"ðŸ“Š"},{id:"analytics",label:"Analytics",icon:"ðŸ“ˆ"},{id:"settings",label:"Settings",icon:"âš™ï¸"}].map(i=>e.jsxs("button",{onClick:()=>h(i.id),className:`px-3 py-1 rounded text-sm transition-colors ${n===i.id?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[e.jsx("span",{className:"mr-1",children:i.icon}),i.label]},i.id))})]}),e.jsxs("div",{className:"p-4 bg-white max-h-64 overflow-y-auto",children:[n==="dashboard"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"42"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Sessions"})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"98%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full text-left p-2 hover:bg-gray-50 rounded transition-colors",children:"ðŸ” Analyze Current Page"}),e.jsx("button",{className:"w-full text-left p-2 hover:bg-gray-50 rounded transition-colors",children:"ðŸ“‹ Export Data"}),e.jsx("button",{className:"w-full text-left p-2 hover:bg-gray-50 rounded transition-colors",children:"ðŸ”„ Refresh Stats"})]})]})]}),n==="analytics"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“ˆ"}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Track your browsing patterns and extension usage"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:"Pages Visited Today"}),e.jsx("span",{className:"font-medium",children:"127"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:"Time Saved"}),e.jsx("span",{className:"font-medium",children:"2.5 hrs"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:"Actions Performed"}),e.jsx("span",{className:"font-medium",children:"34"})]})]})]})}),n==="settings"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-3",children:"Extension Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Enable Extension"}),e.jsx("button",{onClick:x,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d?"bg-blue-500":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-minimize"}),e.jsx("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-300",children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Show notifications"}),e.jsx("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-blue-500",children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-6"})})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsx("button",{className:"w-full bg-red-50 text-red-600 py-2 px-3 rounded text-sm hover:bg-red-100 transition-colors",children:"Reset All Settings"})})]})})]})]})};class f{constructor(){o(this,"root",null);o(this,"container",null);o(this,"isInjected",!1);this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.setupExtension()):this.setupExtension(),chrome.runtime.onMessage.addListener((s,t,n)=>{this.handleMessage(s,t,n)})}setupExtension(){this.shouldInject()&&this.injectWidget(),document.addEventListener("keydown",s=>{s.ctrlKey&&s.shiftKey&&s.key==="E"&&(s.preventDefault(),this.toggleWidget())})}shouldInject(){const s=["chrome://","chrome-extension://","moz-extension://","edge://","about:"],t=window.location.href;return!s.some(n=>t.startsWith(n))}injectWidget(){this.isInjected||(this.container=document.createElement("div"),this.container.id="chrome-extension-react-widget",this.container.style.cssText=`
      position: fixed !important;
      top: 20px !important;
      right: 20px !important;
      z-index: 2147483647 !important;
      pointer-events: auto !important;
    `,document.body.appendChild(this.container),this.root=g(this.container),this.renderWidget(),this.isInjected=!0,console.log("Chrome extension widget injected"))}renderWidget(){this.root&&this.root.render(e.jsx(j.StrictMode,{children:e.jsx(b,{onClose:()=>this.hideWidget()})}))}toggleWidget(){this.isInjected?this.container&&(this.container.style.display=this.container.style.display==="none"?"block":"none"):this.injectWidget()}hideWidget(){this.container&&(this.container.style.display="none")}showWidget(){this.isInjected?this.container&&(this.container.style.display="block"):this.injectWidget()}removeWidget(){this.root&&(this.root.unmount(),this.root=null),this.container&&this.container.parentNode&&(this.container.parentNode.removeChild(this.container),this.container=null),this.isInjected=!1}handleMessage(s,t,n){switch(console.log("Content script received message:",s),s.type){case"PAGE_LOADED":console.log("Page loaded message received");break;case"TOGGLE_WIDGET":this.toggleWidget(),n({success:!0});break;case"SHOW_WIDGET":this.showWidget(),n({success:!0});break;case"HIDE_WIDGET":this.hideWidget(),n({success:!0});break;case"EXTENSION_TOGGLED":s.enabled?this.showWidget():this.hideWidget();break;case"STORAGE_CHANGED":console.log("Storage changed:",s.changes);break;default:console.log("Unknown message type:",s.type)}}}new f;
