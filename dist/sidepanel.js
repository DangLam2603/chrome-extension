var Sr=Object.defineProperty;var Rr=(i,l,n)=>l in i?Sr(i,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[l]=n;var N0=(i,l,n)=>Rr(i,typeof l!="symbol"?l+"":l,n);import"./chunks/modulepreload-polyfill-B5Qt9EMX.js";import{r as X,j as r,c as Hr}from"./chunks/globals-DXcH-vAE.js";var I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function zr(i){if(i.__esModule)return i;var l=i.default;if(typeof l=="function"){var n=function t(){return this instanceof t?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};n.prototype=l.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(t){var u=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(n,t,u.get?u:{enumerable:!0,get:function(){return i[t]}})}),n}const Ir={ui:{activeSection:"chatbox",leftNavCollapsed:!1,rightSidebarVisible:!1},chat:{messages:[],sources:[],isLoading:!1},mcp:{connections:[],isLoading:!1},autoConnect:{rules:[],isLoading:!1}};function Pr(i,l){switch(l.type){case"SET_ACTIVE_SECTION":return{...i,ui:{...i.ui,activeSection:l.payload,rightSidebarVisible:l.payload==="chatbox"?i.ui.rightSidebarVisible:!1}};case"TOGGLE_LEFT_NAV":return{...i,ui:{...i.ui,leftNavCollapsed:!i.ui.leftNavCollapsed}};case"SET_RIGHT_SIDEBAR_VISIBLE":return{...i,ui:{...i.ui,rightSidebarVisible:l.payload}};case"ADD_CHAT_MESSAGE":return{...i,chat:{...i.chat,messages:[...i.chat.messages,l.payload]}};case"SET_CHAT_LOADING":return{...i,chat:{...i.chat,isLoading:l.payload}};case"SET_CHAT_SOURCES":return{...i,chat:{...i.chat,sources:l.payload}};case"SET_MCP_CONNECTIONS":return{...i,mcp:{...i.mcp,connections:l.payload}};case"SET_MCP_LOADING":return{...i,mcp:{...i.mcp,isLoading:l.payload}};case"UPDATE_MCP_CONNECTION":return{...i,mcp:{...i.mcp,connections:i.mcp.connections.map(n=>n.id===l.payload.id?{...n,...l.payload.updates}:n)}};case"SET_AUTOCONNECT_RULES":return{...i,autoConnect:{...i.autoConnect,rules:l.payload}};case"SET_AUTOCONNECT_LOADING":return{...i,autoConnect:{...i.autoConnect,isLoading:l.payload}};case"UPDATE_AUTOCONNECT_RULE":return{...i,autoConnect:{...i.autoConnect,rules:i.autoConnect.rules.map(n=>n.id===l.payload.id?{...n,...l.payload.updates}:n)}};case"LOAD_STATE":return{...i,...l.payload};default:return i}}const pr=X.createContext(null),Or=({children:i})=>{const[l,n]=X.useReducer(Pr,Ir);return X.useEffect(()=>{chrome.storage.sync.get(["activeSection","leftNavCollapsed","chatMessages","chatSources","mcpConnections","autoConnectRules"],t=>{t.activeSection&&n({type:"LOAD_STATE",payload:{ui:{activeSection:t.activeSection||"chatbox",leftNavCollapsed:t.leftNavCollapsed||!1,rightSidebarVisible:!1},chat:{messages:t.chatMessages||[],sources:t.chatSources||[],isLoading:!1},mcp:{connections:t.mcpConnections||[],isLoading:!1},autoConnect:{rules:t.autoConnectRules||[],isLoading:!1}}})})},[]),X.useEffect(()=>{chrome.storage.sync.set({activeSection:l.ui.activeSection,leftNavCollapsed:l.ui.leftNavCollapsed,chatMessages:l.chat.messages,chatSources:l.chat.sources,mcpConnections:l.mcp.connections,autoConnectRules:l.autoConnect.rules})},[l]),r.jsx(pr.Provider,{value:{state:l,dispatch:n},children:i})},y0=()=>{const i=X.useContext(pr);if(!i)throw new Error("useAppContext must be used within an AppProvider");return i},Wr=({leftNavCollapsed:i,rightSidebarVisible:l,children:n,leftNavigation:t,rightSidebar:u})=>{const C=l&&u;return r.jsxs("div",{className:"h-screen bg-gray-900 text-white flex overflow-hidden relative",children:[r.jsx("div",{className:`
        bg-gray-800 border-r border-gray-700 transition-all duration-300 flex-shrink-0
        ${i?"w-16":"w-64"}
      `,children:t}),r.jsxs("div",{className:"flex-1 flex min-w-0 relative",children:[r.jsx("div",{className:"flex-1 overflow-hidden relative",children:n}),C&&r.jsx("div",{className:"flex-shrink-0",children:u})]})]})},o0={region:"ap-southeast-1",userPoolId:"ap-southeast-1_6mxaYDeU2",clientId:"55eql2a3igsleajk3o98sjucjq",cognitoDomain:"https://ap-southeast-16mxaydeu2.auth.ap-southeast-1.amazoncognito.com"},T0={scopes:"email openid profile".split(" "),responseType:"code",grantType:"authorization_code"},S0=()=>{const i=chrome.runtime.id;return{callbackUrl:`chrome-extension://${i}/callback.html`,signoutUrl:`chrome-extension://${i}/signout.html`}},A0=()=>({authUrl:`${o0.cognitoDomain}/oauth2/authorize`,tokenUrl:`${o0.cognitoDomain}/oauth2/token`,logoutUrl:`${o0.cognitoDomain}/logout`,userInfoUrl:`${o0.cognitoDomain}/oauth2/userInfo`}),W={storageKeys:{accessToken:"cognito_access_token",refreshToken:"cognito_refresh_token",idToken:"cognito_id_token",tokenExpiry:"cognito_token_expiry",userInfo:"cognito_user_info",codeVerifier:"cognito_code_verifier",state:"cognito_oauth_state"},tokenRefresh:{refreshThresholdMinutes:5,maxRetryAttempts:3,retryDelayMs:1e3},pkce:{codeVerifierLength:128,codeChallengeMethod:"S256"},session:{autoLogoutOnTokenExpiry:!0,tokenCheckIntervalMinutes:1}};var Q=(i=>(i.LOADING="loading",i.AUTHENTICATED="authenticated",i.UNAUTHENTICATED="unauthenticated",i.ERROR="error",i))(Q||{}),a0=(i=>(i.NETWORK_ERROR="network_error",i.TOKEN_EXPIRED="token_expired",i.INVALID_TOKEN="invalid_token",i.REFRESH_FAILED="refresh_failed",i.OAUTH_ERROR="oauth_error",i.UNKNOWN_ERROR="unknown_error",i))(a0||{});class V{static async storeTokens(l){const n={[W.storageKeys.accessToken]:l.accessToken,[W.storageKeys.refreshToken]:l.refreshToken,[W.storageKeys.idToken]:l.idToken,[W.storageKeys.tokenExpiry]:l.expiresAt};await chrome.storage.local.set(n)}static async getTokens(){const l=[W.storageKeys.accessToken,W.storageKeys.refreshToken,W.storageKeys.idToken,W.storageKeys.tokenExpiry],n=await chrome.storage.local.get(l);return n[W.storageKeys.accessToken]?{accessToken:n[W.storageKeys.accessToken],refreshToken:n[W.storageKeys.refreshToken],idToken:n[W.storageKeys.idToken],expiresAt:n[W.storageKeys.tokenExpiry]}:null}static async storeUserInfo(l){await chrome.storage.local.set({[W.storageKeys.userInfo]:l})}static async getUserInfo(){return(await chrome.storage.local.get([W.storageKeys.userInfo]))[W.storageKeys.userInfo]||null}static async storePKCEData(l,n){await chrome.storage.local.set({[W.storageKeys.codeVerifier]:l,[W.storageKeys.state]:n})}static async getPKCEData(){const l=await chrome.storage.local.get([W.storageKeys.codeVerifier,W.storageKeys.state]);return l[W.storageKeys.codeVerifier]?{codeVerifier:l[W.storageKeys.codeVerifier],state:l[W.storageKeys.state]}:null}static async clearAuthData(){const l=Object.values(W.storageKeys);await chrome.storage.local.remove(l)}static isTokenExpired(l){const n=Date.now(),t=W.tokenRefresh.refreshThresholdMinutes*60*1e3;return n>=l-t}static calculateExpirationTime(l){return Date.now()+l*1e3}}var gr={exports:{}};function Ur(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var R0={exports:{}};const qr={},Mr=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"})),Kr=zr(Mr);var je;function O(){return je||(je=1,function(i,l){(function(n,t){i.exports=t()})(I,function(){var n=n||function(t,u){var C;if(typeof window<"u"&&window.crypto&&(C=window.crypto),typeof self<"u"&&self.crypto&&(C=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(C=globalThis.crypto),!C&&typeof window<"u"&&window.msCrypto&&(C=window.msCrypto),!C&&typeof I<"u"&&I.crypto&&(C=I.crypto),!C&&typeof Ur=="function")try{C=Kr}catch{}var A=function(){if(C){if(typeof C.getRandomValues=="function")try{return C.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof C.randomBytes=="function")try{return C.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},v=Object.create||function(){function x(){}return function(o){var f;return x.prototype=o,f=new x,x.prototype=null,f}}(),g={},e=g.lib={},s=e.Base=function(){return{extend:function(x){var o=v(this);return x&&o.mixIn(x),(!o.hasOwnProperty("init")||this.init===o.init)&&(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var o in x)x.hasOwnProperty(o)&&(this[o]=x[o]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),m=e.WordArray=s.extend({init:function(x,o){x=this.words=x||[],o!=u?this.sigBytes=o:this.sigBytes=x.length*4},toString:function(x){return(x||d).stringify(this)},concat:function(x){var o=this.words,f=x.words,y=this.sigBytes,b=x.sigBytes;if(this.clamp(),y%4)for(var D=0;D<b;D++){var _=f[D>>>2]>>>24-D%4*8&255;o[y+D>>>2]|=_<<24-(y+D)%4*8}else for(var R=0;R<b;R+=4)o[y+R>>>2]=f[R>>>2];return this.sigBytes+=b,this},clamp:function(){var x=this.words,o=this.sigBytes;x[o>>>2]&=4294967295<<32-o%4*8,x.length=t.ceil(o/4)},clone:function(){var x=s.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var o=[],f=0;f<x;f+=4)o.push(A());return new m.init(o,x)}}),a=g.enc={},d=a.Hex={stringify:function(x){for(var o=x.words,f=x.sigBytes,y=[],b=0;b<f;b++){var D=o[b>>>2]>>>24-b%4*8&255;y.push((D>>>4).toString(16)),y.push((D&15).toString(16))}return y.join("")},parse:function(x){for(var o=x.length,f=[],y=0;y<o;y+=2)f[y>>>3]|=parseInt(x.substr(y,2),16)<<24-y%8*4;return new m.init(f,o/2)}},c=a.Latin1={stringify:function(x){for(var o=x.words,f=x.sigBytes,y=[],b=0;b<f;b++){var D=o[b>>>2]>>>24-b%4*8&255;y.push(String.fromCharCode(D))}return y.join("")},parse:function(x){for(var o=x.length,f=[],y=0;y<o;y++)f[y>>>2]|=(x.charCodeAt(y)&255)<<24-y%4*8;return new m.init(f,o)}},p=a.Utf8={stringify:function(x){try{return decodeURIComponent(escape(c.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return c.parse(unescape(encodeURIComponent(x)))}},h=e.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=p.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var o,f=this._data,y=f.words,b=f.sigBytes,D=this.blockSize,_=D*4,R=b/_;x?R=t.ceil(R):R=t.max((R|0)-this._minBufferSize,0);var B=R*D,F=t.min(B*4,b);if(B){for(var w=0;w<B;w+=D)this._doProcessBlock(y,w);o=y.splice(0,B),f.sigBytes-=F}return new m.init(o,F)},clone:function(){var x=s.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});e.Hasher=h.extend({cfg:s.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var o=this._doFinalize();return o},blockSize:16,_createHelper:function(x){return function(o,f){return new x.init(f).finalize(o)}},_createHmacHelper:function(x){return function(o,f){return new E.HMAC.init(x,f).finalize(o)}}});var E=g.algo={};return g}(Math);return n})}(R0)),R0.exports}var H0={exports:{}},Ne;function k0(){return Ne||(Ne=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(t){var u=n,C=u.lib,A=C.Base,v=C.WordArray,g=u.x64={};g.Word=A.extend({init:function(e,s){this.high=e,this.low=s}}),g.WordArray=A.extend({init:function(e,s){e=this.words=e||[],s!=t?this.sigBytes=s:this.sigBytes=e.length*8},toX32:function(){for(var e=this.words,s=e.length,m=[],a=0;a<s;a++){var d=e[a];m.push(d.high),m.push(d.low)}return v.create(m,this.sigBytes)},clone:function(){for(var e=A.clone.call(this),s=e.words=this.words.slice(0),m=s.length,a=0;a<m;a++)s[a]=s[a].clone();return e}})}(),n})}(H0)),H0.exports}var L0={exports:{}},Te;function $r(){return Te||(Te=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(){if(typeof ArrayBuffer=="function"){var t=n,u=t.lib,C=u.WordArray,A=C.init,v=C.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var e=g.byteLength,s=[],m=0;m<e;m++)s[m>>>2]|=g[m]<<24-m%4*8;A.call(this,s,e)}else A.apply(this,arguments)};v.prototype=C}}(),n.lib.WordArray})}(L0)),L0.exports}var z0={exports:{}},Se;function Gr(){return Se||(Se=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(){var t=n,u=t.lib,C=u.WordArray,A=t.enc;A.Utf16=A.Utf16BE={stringify:function(g){for(var e=g.words,s=g.sigBytes,m=[],a=0;a<s;a+=2){var d=e[a>>>2]>>>16-a%4*8&65535;m.push(String.fromCharCode(d))}return m.join("")},parse:function(g){for(var e=g.length,s=[],m=0;m<e;m++)s[m>>>1]|=g.charCodeAt(m)<<16-m%2*16;return C.create(s,e*2)}},A.Utf16LE={stringify:function(g){for(var e=g.words,s=g.sigBytes,m=[],a=0;a<s;a+=2){var d=v(e[a>>>2]>>>16-a%4*8&65535);m.push(String.fromCharCode(d))}return m.join("")},parse:function(g){for(var e=g.length,s=[],m=0;m<e;m++)s[m>>>1]|=v(g.charCodeAt(m)<<16-m%2*16);return C.create(s,e*2)}};function v(g){return g<<8&4278255360|g>>>8&16711935}}(),n.enc.Utf16})}(z0)),z0.exports}var I0={exports:{}},Re;function l0(){return Re||(Re=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(){var t=n,u=t.lib,C=u.WordArray,A=t.enc;A.Base64={stringify:function(g){var e=g.words,s=g.sigBytes,m=this._map;g.clamp();for(var a=[],d=0;d<s;d+=3)for(var c=e[d>>>2]>>>24-d%4*8&255,p=e[d+1>>>2]>>>24-(d+1)%4*8&255,h=e[d+2>>>2]>>>24-(d+2)%4*8&255,E=c<<16|p<<8|h,x=0;x<4&&d+x*.75<s;x++)a.push(m.charAt(E>>>6*(3-x)&63));var o=m.charAt(64);if(o)for(;a.length%4;)a.push(o);return a.join("")},parse:function(g){var e=g.length,s=this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var a=0;a<s.length;a++)m[s.charCodeAt(a)]=a}var d=s.charAt(64);if(d){var c=g.indexOf(d);c!==-1&&(e=c)}return v(g,e,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function v(g,e,s){for(var m=[],a=0,d=0;d<e;d++)if(d%4){var c=s[g.charCodeAt(d-1)]<<d%4*2,p=s[g.charCodeAt(d)]>>>6-d%4*2,h=c|p;m[a>>>2]|=h<<24-a%4*8,a++}return C.create(m,a)}}(),n.enc.Base64})}(I0)),I0.exports}var P0={exports:{}},He;function Vr(){return He||(He=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(){var t=n,u=t.lib,C=u.WordArray,A=t.enc;A.Base64url={stringify:function(g,e){e===void 0&&(e=!0);var s=g.words,m=g.sigBytes,a=e?this._safe_map:this._map;g.clamp();for(var d=[],c=0;c<m;c+=3)for(var p=s[c>>>2]>>>24-c%4*8&255,h=s[c+1>>>2]>>>24-(c+1)%4*8&255,E=s[c+2>>>2]>>>24-(c+2)%4*8&255,x=p<<16|h<<8|E,o=0;o<4&&c+o*.75<m;o++)d.push(a.charAt(x>>>6*(3-o)&63));var f=a.charAt(64);if(f)for(;d.length%4;)d.push(f);return d.join("")},parse:function(g,e){e===void 0&&(e=!0);var s=g.length,m=e?this._safe_map:this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var d=0;d<m.length;d++)a[m.charCodeAt(d)]=d}var c=m.charAt(64);if(c){var p=g.indexOf(c);p!==-1&&(s=p)}return v(g,s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function v(g,e,s){for(var m=[],a=0,d=0;d<e;d++)if(d%4){var c=s[g.charCodeAt(d-1)]<<d%4*2,p=s[g.charCodeAt(d)]>>>6-d%4*2,h=c|p;m[a>>>2]|=h<<24-a%4*8,a++}return C.create(m,a)}}(),n.enc.Base64url})}(P0)),P0.exports}var O0={exports:{}},Le;function d0(){return Le||(Le=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(t){var u=n,C=u.lib,A=C.WordArray,v=C.Hasher,g=u.algo,e=[];(function(){for(var p=0;p<64;p++)e[p]=t.abs(t.sin(p+1))*4294967296|0})();var s=g.MD5=v.extend({_doReset:function(){this._hash=new A.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,h){for(var E=0;E<16;E++){var x=h+E,o=p[x];p[x]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360}var f=this._hash.words,y=p[h+0],b=p[h+1],D=p[h+2],_=p[h+3],R=p[h+4],B=p[h+5],F=p[h+6],w=p[h+7],j=p[h+8],H=p[h+9],L=p[h+10],z=p[h+11],$=p[h+12],U=p[h+13],M=p[h+14],q=p[h+15],k=f[0],T=f[1],S=f[2],N=f[3];k=m(k,T,S,N,y,7,e[0]),N=m(N,k,T,S,b,12,e[1]),S=m(S,N,k,T,D,17,e[2]),T=m(T,S,N,k,_,22,e[3]),k=m(k,T,S,N,R,7,e[4]),N=m(N,k,T,S,B,12,e[5]),S=m(S,N,k,T,F,17,e[6]),T=m(T,S,N,k,w,22,e[7]),k=m(k,T,S,N,j,7,e[8]),N=m(N,k,T,S,H,12,e[9]),S=m(S,N,k,T,L,17,e[10]),T=m(T,S,N,k,z,22,e[11]),k=m(k,T,S,N,$,7,e[12]),N=m(N,k,T,S,U,12,e[13]),S=m(S,N,k,T,M,17,e[14]),T=m(T,S,N,k,q,22,e[15]),k=a(k,T,S,N,b,5,e[16]),N=a(N,k,T,S,F,9,e[17]),S=a(S,N,k,T,z,14,e[18]),T=a(T,S,N,k,y,20,e[19]),k=a(k,T,S,N,B,5,e[20]),N=a(N,k,T,S,L,9,e[21]),S=a(S,N,k,T,q,14,e[22]),T=a(T,S,N,k,R,20,e[23]),k=a(k,T,S,N,H,5,e[24]),N=a(N,k,T,S,M,9,e[25]),S=a(S,N,k,T,_,14,e[26]),T=a(T,S,N,k,j,20,e[27]),k=a(k,T,S,N,U,5,e[28]),N=a(N,k,T,S,D,9,e[29]),S=a(S,N,k,T,w,14,e[30]),T=a(T,S,N,k,$,20,e[31]),k=d(k,T,S,N,B,4,e[32]),N=d(N,k,T,S,j,11,e[33]),S=d(S,N,k,T,z,16,e[34]),T=d(T,S,N,k,M,23,e[35]),k=d(k,T,S,N,b,4,e[36]),N=d(N,k,T,S,R,11,e[37]),S=d(S,N,k,T,w,16,e[38]),T=d(T,S,N,k,L,23,e[39]),k=d(k,T,S,N,U,4,e[40]),N=d(N,k,T,S,y,11,e[41]),S=d(S,N,k,T,_,16,e[42]),T=d(T,S,N,k,F,23,e[43]),k=d(k,T,S,N,H,4,e[44]),N=d(N,k,T,S,$,11,e[45]),S=d(S,N,k,T,q,16,e[46]),T=d(T,S,N,k,D,23,e[47]),k=c(k,T,S,N,y,6,e[48]),N=c(N,k,T,S,w,10,e[49]),S=c(S,N,k,T,M,15,e[50]),T=c(T,S,N,k,B,21,e[51]),k=c(k,T,S,N,$,6,e[52]),N=c(N,k,T,S,_,10,e[53]),S=c(S,N,k,T,L,15,e[54]),T=c(T,S,N,k,b,21,e[55]),k=c(k,T,S,N,j,6,e[56]),N=c(N,k,T,S,q,10,e[57]),S=c(S,N,k,T,F,15,e[58]),T=c(T,S,N,k,U,21,e[59]),k=c(k,T,S,N,R,6,e[60]),N=c(N,k,T,S,z,10,e[61]),S=c(S,N,k,T,D,15,e[62]),T=c(T,S,N,k,H,21,e[63]),f[0]=f[0]+k|0,f[1]=f[1]+T|0,f[2]=f[2]+S|0,f[3]=f[3]+N|0},_doFinalize:function(){var p=this._data,h=p.words,E=this._nDataBytes*8,x=p.sigBytes*8;h[x>>>5]|=128<<24-x%32;var o=t.floor(E/4294967296),f=E;h[(x+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,h[(x+64>>>9<<4)+14]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,p.sigBytes=(h.length+1)*4,this._process();for(var y=this._hash,b=y.words,D=0;D<4;D++){var _=b[D];b[D]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return y},clone:function(){var p=v.clone.call(this);return p._hash=this._hash.clone(),p}});function m(p,h,E,x,o,f,y){var b=p+(h&E|~h&x)+o+y;return(b<<f|b>>>32-f)+h}function a(p,h,E,x,o,f,y){var b=p+(h&x|E&~x)+o+y;return(b<<f|b>>>32-f)+h}function d(p,h,E,x,o,f,y){var b=p+(h^E^x)+o+y;return(b<<f|b>>>32-f)+h}function c(p,h,E,x,o,f,y){var b=p+(E^(h|~x))+o+y;return(b<<f|b>>>32-f)+h}u.MD5=v._createHelper(s),u.HmacMD5=v._createHmacHelper(s)}(Math),n.MD5})}(O0)),O0.exports}var W0={exports:{}},ze;function Cr(){return ze||(ze=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(){var t=n,u=t.lib,C=u.WordArray,A=u.Hasher,v=t.algo,g=[],e=v.SHA1=A.extend({_doReset:function(){this._hash=new C.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(s,m){for(var a=this._hash.words,d=a[0],c=a[1],p=a[2],h=a[3],E=a[4],x=0;x<80;x++){if(x<16)g[x]=s[m+x]|0;else{var o=g[x-3]^g[x-8]^g[x-14]^g[x-16];g[x]=o<<1|o>>>31}var f=(d<<5|d>>>27)+E+g[x];x<20?f+=(c&p|~c&h)+1518500249:x<40?f+=(c^p^h)+1859775393:x<60?f+=(c&p|c&h|p&h)-1894007588:f+=(c^p^h)-899497514,E=h,h=p,p=c<<30|c>>>2,c=d,d=f}a[0]=a[0]+d|0,a[1]=a[1]+c|0,a[2]=a[2]+p|0,a[3]=a[3]+h|0,a[4]=a[4]+E|0},_doFinalize:function(){var s=this._data,m=s.words,a=this._nDataBytes*8,d=s.sigBytes*8;return m[d>>>5]|=128<<24-d%32,m[(d+64>>>9<<4)+14]=Math.floor(a/4294967296),m[(d+64>>>9<<4)+15]=a,s.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var s=A.clone.call(this);return s._hash=this._hash.clone(),s}});t.SHA1=A._createHelper(e),t.HmacSHA1=A._createHmacHelper(e)}(),n.SHA1})}(W0)),W0.exports}var U0={exports:{}},Ie;function pe(){return Ie||(Ie=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){return function(t){var u=n,C=u.lib,A=C.WordArray,v=C.Hasher,g=u.algo,e=[],s=[];(function(){function d(E){for(var x=t.sqrt(E),o=2;o<=x;o++)if(!(E%o))return!1;return!0}function c(E){return(E-(E|0))*4294967296|0}for(var p=2,h=0;h<64;)d(p)&&(h<8&&(e[h]=c(t.pow(p,1/2))),s[h]=c(t.pow(p,1/3)),h++),p++})();var m=[],a=g.SHA256=v.extend({_doReset:function(){this._hash=new A.init(e.slice(0))},_doProcessBlock:function(d,c){for(var p=this._hash.words,h=p[0],E=p[1],x=p[2],o=p[3],f=p[4],y=p[5],b=p[6],D=p[7],_=0;_<64;_++){if(_<16)m[_]=d[c+_]|0;else{var R=m[_-15],B=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,F=m[_-2],w=(F<<15|F>>>17)^(F<<13|F>>>19)^F>>>10;m[_]=B+m[_-7]+w+m[_-16]}var j=f&y^~f&b,H=h&E^h&x^E&x,L=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22),z=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25),$=D+z+j+s[_]+m[_],U=L+H;D=b,b=y,y=f,f=o+$|0,o=x,x=E,E=h,h=$+U|0}p[0]=p[0]+h|0,p[1]=p[1]+E|0,p[2]=p[2]+x|0,p[3]=p[3]+o|0,p[4]=p[4]+f|0,p[5]=p[5]+y|0,p[6]=p[6]+b|0,p[7]=p[7]+D|0},_doFinalize:function(){var d=this._data,c=d.words,p=this._nDataBytes*8,h=d.sigBytes*8;return c[h>>>5]|=128<<24-h%32,c[(h+64>>>9<<4)+14]=t.floor(p/4294967296),c[(h+64>>>9<<4)+15]=p,d.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var d=v.clone.call(this);return d._hash=this._hash.clone(),d}});u.SHA256=v._createHelper(a),u.HmacSHA256=v._createHmacHelper(a)}(Math),n.SHA256})}(U0)),U0.exports}var q0={exports:{}},Pe;function Xr(){return Pe||(Pe=1,function(i,l){(function(n,t,u){i.exports=t(O(),pe())})(I,function(n){return function(){var t=n,u=t.lib,C=u.WordArray,A=t.algo,v=A.SHA256,g=A.SHA224=v.extend({_doReset:function(){this._hash=new C.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=v._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=v._createHelper(g),t.HmacSHA224=v._createHmacHelper(g)}(),n.SHA224})}(q0)),q0.exports}var M0={exports:{}},Oe;function mr(){return Oe||(Oe=1,function(i,l){(function(n,t,u){i.exports=t(O(),k0())})(I,function(n){return function(){var t=n,u=t.lib,C=u.Hasher,A=t.x64,v=A.Word,g=A.WordArray,e=t.algo;function s(){return v.create.apply(v,arguments)}var m=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],a=[];(function(){for(var c=0;c<80;c++)a[c]=s()})();var d=e.SHA512=C.extend({_doReset:function(){this._hash=new g.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(c,p){for(var h=this._hash.words,E=h[0],x=h[1],o=h[2],f=h[3],y=h[4],b=h[5],D=h[6],_=h[7],R=E.high,B=E.low,F=x.high,w=x.low,j=o.high,H=o.low,L=f.high,z=f.low,$=y.high,U=y.low,M=b.high,q=b.low,k=D.high,T=D.low,S=_.high,N=_.low,G=R,K=B,Y=F,P=w,v0=j,f0=H,w0=L,p0=z,t0=$,J=U,D0=M,g0=q,F0=k,C0=T,j0=S,m0=N,n0=0;n0<80;n0++){var r0,s0,_0=a[n0];if(n0<16)s0=_0.high=c[p+n0*2]|0,r0=_0.low=c[p+n0*2+1]|0;else{var Ce=a[n0-15],h0=Ce.high,B0=Ce.low,Br=(h0>>>1|B0<<31)^(h0>>>8|B0<<24)^h0>>>7,me=(B0>>>1|h0<<31)^(B0>>>8|h0<<24)^(B0>>>7|h0<<25),Be=a[n0-2],u0=Be.high,E0=Be.low,Er=(u0>>>19|E0<<13)^(u0<<3|E0>>>29)^u0>>>6,Ee=(E0>>>19|u0<<13)^(E0<<3|u0>>>29)^(E0>>>6|u0<<26),Ae=a[n0-7],Ar=Ae.high,br=Ae.low,be=a[n0-16],yr=be.high,ye=be.low;r0=me+br,s0=Br+Ar+(r0>>>0<me>>>0?1:0),r0=r0+Ee,s0=s0+Er+(r0>>>0<Ee>>>0?1:0),r0=r0+ye,s0=s0+yr+(r0>>>0<ye>>>0?1:0),_0.high=s0,_0.low=r0}var Dr=t0&D0^~t0&F0,De=J&g0^~J&C0,Fr=G&Y^G&v0^Y&v0,_r=K&P^K&f0^P&f0,kr=(G>>>28|K<<4)^(G<<30|K>>>2)^(G<<25|K>>>7),Fe=(K>>>28|G<<4)^(K<<30|G>>>2)^(K<<25|G>>>7),wr=(t0>>>14|J<<18)^(t0>>>18|J<<14)^(t0<<23|J>>>9),jr=(J>>>14|t0<<18)^(J>>>18|t0<<14)^(J<<23|t0>>>9),_e=m[n0],Nr=_e.high,ke=_e.low,e0=m0+jr,x0=j0+wr+(e0>>>0<m0>>>0?1:0),e0=e0+De,x0=x0+Dr+(e0>>>0<De>>>0?1:0),e0=e0+ke,x0=x0+Nr+(e0>>>0<ke>>>0?1:0),e0=e0+r0,x0=x0+s0+(e0>>>0<r0>>>0?1:0),we=Fe+_r,Tr=kr+Fr+(we>>>0<Fe>>>0?1:0);j0=F0,m0=C0,F0=D0,C0=g0,D0=t0,g0=J,J=p0+e0|0,t0=w0+x0+(J>>>0<p0>>>0?1:0)|0,w0=v0,p0=f0,v0=Y,f0=P,Y=G,P=K,K=e0+we|0,G=x0+Tr+(K>>>0<e0>>>0?1:0)|0}B=E.low=B+K,E.high=R+G+(B>>>0<K>>>0?1:0),w=x.low=w+P,x.high=F+Y+(w>>>0<P>>>0?1:0),H=o.low=H+f0,o.high=j+v0+(H>>>0<f0>>>0?1:0),z=f.low=z+p0,f.high=L+w0+(z>>>0<p0>>>0?1:0),U=y.low=U+J,y.high=$+t0+(U>>>0<J>>>0?1:0),q=b.low=q+g0,b.high=M+D0+(q>>>0<g0>>>0?1:0),T=D.low=T+C0,D.high=k+F0+(T>>>0<C0>>>0?1:0),N=_.low=N+m0,_.high=S+j0+(N>>>0<m0>>>0?1:0)},_doFinalize:function(){var c=this._data,p=c.words,h=this._nDataBytes*8,E=c.sigBytes*8;p[E>>>5]|=128<<24-E%32,p[(E+128>>>10<<5)+30]=Math.floor(h/4294967296),p[(E+128>>>10<<5)+31]=h,c.sigBytes=p.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var c=C.clone.call(this);return c._hash=this._hash.clone(),c},blockSize:1024/32});t.SHA512=C._createHelper(d),t.HmacSHA512=C._createHmacHelper(d)}(),n.SHA512})}(M0)),M0.exports}var K0={exports:{}},We;function Zr(){return We||(We=1,function(i,l){(function(n,t,u){i.exports=t(O(),k0(),mr())})(I,function(n){return function(){var t=n,u=t.x64,C=u.Word,A=u.WordArray,v=t.algo,g=v.SHA512,e=v.SHA384=g.extend({_doReset:function(){this._hash=new A.init([new C.init(3418070365,3238371032),new C.init(1654270250,914150663),new C.init(2438529370,812702999),new C.init(355462360,4144912697),new C.init(1731405415,4290775857),new C.init(2394180231,1750603025),new C.init(3675008525,1694076839),new C.init(1203062813,3204075428)])},_doFinalize:function(){var s=g._doFinalize.call(this);return s.sigBytes-=16,s}});t.SHA384=g._createHelper(e),t.HmacSHA384=g._createHmacHelper(e)}(),n.SHA384})}(K0)),K0.exports}var $0={exports:{}},Ue;function Qr(){return Ue||(Ue=1,function(i,l){(function(n,t,u){i.exports=t(O(),k0())})(I,function(n){return function(t){var u=n,C=u.lib,A=C.WordArray,v=C.Hasher,g=u.x64,e=g.Word,s=u.algo,m=[],a=[],d=[];(function(){for(var h=1,E=0,x=0;x<24;x++){m[h+5*E]=(x+1)*(x+2)/2%64;var o=E%5,f=(2*h+3*E)%5;h=o,E=f}for(var h=0;h<5;h++)for(var E=0;E<5;E++)a[h+5*E]=E+(2*h+3*E)%5*5;for(var y=1,b=0;b<24;b++){for(var D=0,_=0,R=0;R<7;R++){if(y&1){var B=(1<<R)-1;B<32?_^=1<<B:D^=1<<B-32}y&128?y=y<<1^113:y<<=1}d[b]=e.create(D,_)}})();var c=[];(function(){for(var h=0;h<25;h++)c[h]=e.create()})();var p=s.SHA3=v.extend({cfg:v.cfg.extend({outputLength:512}),_doReset:function(){for(var h=this._state=[],E=0;E<25;E++)h[E]=new e.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(h,E){for(var x=this._state,o=this.blockSize/2,f=0;f<o;f++){var y=h[E+2*f],b=h[E+2*f+1];y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;var D=x[f];D.high^=b,D.low^=y}for(var _=0;_<24;_++){for(var R=0;R<5;R++){for(var B=0,F=0,w=0;w<5;w++){var D=x[R+5*w];B^=D.high,F^=D.low}var j=c[R];j.high=B,j.low=F}for(var R=0;R<5;R++)for(var H=c[(R+4)%5],L=c[(R+1)%5],z=L.high,$=L.low,B=H.high^(z<<1|$>>>31),F=H.low^($<<1|z>>>31),w=0;w<5;w++){var D=x[R+5*w];D.high^=B,D.low^=F}for(var U=1;U<25;U++){var B,F,D=x[U],M=D.high,q=D.low,k=m[U];k<32?(B=M<<k|q>>>32-k,F=q<<k|M>>>32-k):(B=q<<k-32|M>>>64-k,F=M<<k-32|q>>>64-k);var T=c[a[U]];T.high=B,T.low=F}var S=c[0],N=x[0];S.high=N.high,S.low=N.low;for(var R=0;R<5;R++)for(var w=0;w<5;w++){var U=R+5*w,D=x[U],G=c[U],K=c[(R+1)%5+5*w],Y=c[(R+2)%5+5*w];D.high=G.high^~K.high&Y.high,D.low=G.low^~K.low&Y.low}var D=x[0],P=d[_];D.high^=P.high,D.low^=P.low}},_doFinalize:function(){var h=this._data,E=h.words;this._nDataBytes*8;var x=h.sigBytes*8,o=this.blockSize*32;E[x>>>5]|=1<<24-x%32,E[(t.ceil((x+1)/o)*o>>>5)-1]|=128,h.sigBytes=E.length*4,this._process();for(var f=this._state,y=this.cfg.outputLength/8,b=y/8,D=[],_=0;_<b;_++){var R=f[_],B=R.high,F=R.low;B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,D.push(F),D.push(B)}return new A.init(D,y)},clone:function(){for(var h=v.clone.call(this),E=h._state=this._state.slice(0),x=0;x<25;x++)E[x]=E[x].clone();return h}});u.SHA3=v._createHelper(p),u.HmacSHA3=v._createHmacHelper(p)}(Math),n.SHA3})}($0)),$0.exports}var G0={exports:{}},qe;function Yr(){return qe||(qe=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(t){var u=n,C=u.lib,A=C.WordArray,v=C.Hasher,g=u.algo,e=A.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=A.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=A.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=A.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=A.create([0,1518500249,1859775393,2400959708,2840853838]),c=A.create([1352829926,1548603684,1836072691,2053994217,0]),p=g.RIPEMD160=v.extend({_doReset:function(){this._hash=A.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(b,D){for(var _=0;_<16;_++){var R=D+_,B=b[R];b[R]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}var F=this._hash.words,w=d.words,j=c.words,H=e.words,L=s.words,z=m.words,$=a.words,U,M,q,k,T,S,N,G,K,Y;S=U=F[0],N=M=F[1],G=q=F[2],K=k=F[3],Y=T=F[4];for(var P,_=0;_<80;_+=1)P=U+b[D+H[_]]|0,_<16?P+=h(M,q,k)+w[0]:_<32?P+=E(M,q,k)+w[1]:_<48?P+=x(M,q,k)+w[2]:_<64?P+=o(M,q,k)+w[3]:P+=f(M,q,k)+w[4],P=P|0,P=y(P,z[_]),P=P+T|0,U=T,T=k,k=y(q,10),q=M,M=P,P=S+b[D+L[_]]|0,_<16?P+=f(N,G,K)+j[0]:_<32?P+=o(N,G,K)+j[1]:_<48?P+=x(N,G,K)+j[2]:_<64?P+=E(N,G,K)+j[3]:P+=h(N,G,K)+j[4],P=P|0,P=y(P,$[_]),P=P+Y|0,S=Y,Y=K,K=y(G,10),G=N,N=P;P=F[1]+q+K|0,F[1]=F[2]+k+Y|0,F[2]=F[3]+T+S|0,F[3]=F[4]+U+N|0,F[4]=F[0]+M+G|0,F[0]=P},_doFinalize:function(){var b=this._data,D=b.words,_=this._nDataBytes*8,R=b.sigBytes*8;D[R>>>5]|=128<<24-R%32,D[(R+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,b.sigBytes=(D.length+1)*4,this._process();for(var B=this._hash,F=B.words,w=0;w<5;w++){var j=F[w];F[w]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return B},clone:function(){var b=v.clone.call(this);return b._hash=this._hash.clone(),b}});function h(b,D,_){return b^D^_}function E(b,D,_){return b&D|~b&_}function x(b,D,_){return(b|~D)^_}function o(b,D,_){return b&_|D&~_}function f(b,D,_){return b^(D|~_)}function y(b,D){return b<<D|b>>>32-D}u.RIPEMD160=v._createHelper(p),u.HmacRIPEMD160=v._createHmacHelper(p)}(),n.RIPEMD160})}(G0)),G0.exports}var V0={exports:{}},Me;function ge(){return Me||(Me=1,function(i,l){(function(n,t){i.exports=t(O())})(I,function(n){(function(){var t=n,u=t.lib,C=u.Base,A=t.enc,v=A.Utf8,g=t.algo;g.HMAC=C.extend({init:function(e,s){e=this._hasher=new e.init,typeof s=="string"&&(s=v.parse(s));var m=e.blockSize,a=m*4;s.sigBytes>a&&(s=e.finalize(s)),s.clamp();for(var d=this._oKey=s.clone(),c=this._iKey=s.clone(),p=d.words,h=c.words,E=0;E<m;E++)p[E]^=1549556828,h[E]^=909522486;d.sigBytes=c.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var s=this._hasher,m=s.finalize(e);s.reset();var a=s.finalize(this._oKey.clone().concat(m));return a}})})()})}(V0)),V0.exports}var X0={exports:{}},Ke;function Jr(){return Ke||(Ke=1,function(i,l){(function(n,t,u){i.exports=t(O(),pe(),ge())})(I,function(n){return function(){var t=n,u=t.lib,C=u.Base,A=u.WordArray,v=t.algo,g=v.SHA256,e=v.HMAC,s=v.PBKDF2=C.extend({cfg:C.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,a){for(var d=this.cfg,c=e.create(d.hasher,m),p=A.create(),h=A.create([1]),E=p.words,x=h.words,o=d.keySize,f=d.iterations;E.length<o;){var y=c.update(a).finalize(h);c.reset();for(var b=y.words,D=b.length,_=y,R=1;R<f;R++){_=c.finalize(_),c.reset();for(var B=_.words,F=0;F<D;F++)b[F]^=B[F]}p.concat(y),x[0]++}return p.sigBytes=o*4,p}});t.PBKDF2=function(m,a,d){return s.create(d).compute(m,a)}}(),n.PBKDF2})}(X0)),X0.exports}var Z0={exports:{}},$e;function i0(){return $e||($e=1,function(i,l){(function(n,t,u){i.exports=t(O(),Cr(),ge())})(I,function(n){return function(){var t=n,u=t.lib,C=u.Base,A=u.WordArray,v=t.algo,g=v.MD5,e=v.EvpKDF=C.extend({cfg:C.extend({keySize:128/32,hasher:g,iterations:1}),init:function(s){this.cfg=this.cfg.extend(s)},compute:function(s,m){for(var a,d=this.cfg,c=d.hasher.create(),p=A.create(),h=p.words,E=d.keySize,x=d.iterations;h.length<E;){a&&c.update(a),a=c.update(s).finalize(m),c.reset();for(var o=1;o<x;o++)a=c.finalize(a),c.reset();p.concat(a)}return p.sigBytes=E*4,p}});t.EvpKDF=function(s,m,a){return e.create(a).compute(s,m)}}(),n.EvpKDF})}(Z0)),Z0.exports}var Q0={exports:{}},Ge;function Z(){return Ge||(Ge=1,function(i,l){(function(n,t,u){i.exports=t(O(),i0())})(I,function(n){n.lib.Cipher||function(t){var u=n,C=u.lib,A=C.Base,v=C.WordArray,g=C.BufferedBlockAlgorithm,e=u.enc;e.Utf8;var s=e.Base64,m=u.algo,a=m.EvpKDF,d=C.Cipher=g.extend({cfg:A.extend(),createEncryptor:function(B,F){return this.create(this._ENC_XFORM_MODE,B,F)},createDecryptor:function(B,F){return this.create(this._DEC_XFORM_MODE,B,F)},init:function(B,F,w){this.cfg=this.cfg.extend(w),this._xformMode=B,this._key=F,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(B){return this._append(B),this._process()},finalize:function(B){B&&this._append(B);var F=this._doFinalize();return F},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function B(F){return typeof F=="string"?R:b}return function(F){return{encrypt:function(w,j,H){return B(j).encrypt(F,w,j,H)},decrypt:function(w,j,H){return B(j).decrypt(F,w,j,H)}}}}()});C.StreamCipher=d.extend({_doFinalize:function(){var B=this._process(!0);return B},blockSize:1});var c=u.mode={},p=C.BlockCipherMode=A.extend({createEncryptor:function(B,F){return this.Encryptor.create(B,F)},createDecryptor:function(B,F){return this.Decryptor.create(B,F)},init:function(B,F){this._cipher=B,this._iv=F}}),h=c.CBC=function(){var B=p.extend();B.Encryptor=B.extend({processBlock:function(w,j){var H=this._cipher,L=H.blockSize;F.call(this,w,j,L),H.encryptBlock(w,j),this._prevBlock=w.slice(j,j+L)}}),B.Decryptor=B.extend({processBlock:function(w,j){var H=this._cipher,L=H.blockSize,z=w.slice(j,j+L);H.decryptBlock(w,j),F.call(this,w,j,L),this._prevBlock=z}});function F(w,j,H){var L,z=this._iv;z?(L=z,this._iv=t):L=this._prevBlock;for(var $=0;$<H;$++)w[j+$]^=L[$]}return B}(),E=u.pad={},x=E.Pkcs7={pad:function(B,F){for(var w=F*4,j=w-B.sigBytes%w,H=j<<24|j<<16|j<<8|j,L=[],z=0;z<j;z+=4)L.push(H);var $=v.create(L,j);B.concat($)},unpad:function(B){var F=B.words[B.sigBytes-1>>>2]&255;B.sigBytes-=F}};C.BlockCipher=d.extend({cfg:d.cfg.extend({mode:h,padding:x}),reset:function(){var B;d.reset.call(this);var F=this.cfg,w=F.iv,j=F.mode;this._xformMode==this._ENC_XFORM_MODE?B=j.createEncryptor:(B=j.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==B?this._mode.init(this,w&&w.words):(this._mode=B.call(j,this,w&&w.words),this._mode.__creator=B)},_doProcessBlock:function(B,F){this._mode.processBlock(B,F)},_doFinalize:function(){var B,F=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(F.pad(this._data,this.blockSize),B=this._process(!0)):(B=this._process(!0),F.unpad(B)),B},blockSize:128/32});var o=C.CipherParams=A.extend({init:function(B){this.mixIn(B)},toString:function(B){return(B||this.formatter).stringify(this)}}),f=u.format={},y=f.OpenSSL={stringify:function(B){var F,w=B.ciphertext,j=B.salt;return j?F=v.create([1398893684,1701076831]).concat(j).concat(w):F=w,F.toString(s)},parse:function(B){var F,w=s.parse(B),j=w.words;return j[0]==1398893684&&j[1]==1701076831&&(F=v.create(j.slice(2,4)),j.splice(0,4),w.sigBytes-=16),o.create({ciphertext:w,salt:F})}},b=C.SerializableCipher=A.extend({cfg:A.extend({format:y}),encrypt:function(B,F,w,j){j=this.cfg.extend(j);var H=B.createEncryptor(w,j),L=H.finalize(F),z=H.cfg;return o.create({ciphertext:L,key:w,iv:z.iv,algorithm:B,mode:z.mode,padding:z.padding,blockSize:B.blockSize,formatter:j.format})},decrypt:function(B,F,w,j){j=this.cfg.extend(j),F=this._parse(F,j.format);var H=B.createDecryptor(w,j).finalize(F.ciphertext);return H},_parse:function(B,F){return typeof B=="string"?F.parse(B,this):B}}),D=u.kdf={},_=D.OpenSSL={execute:function(B,F,w,j,H){if(j||(j=v.random(64/8)),H)var L=a.create({keySize:F+w,hasher:H}).compute(B,j);else var L=a.create({keySize:F+w}).compute(B,j);var z=v.create(L.words.slice(F),w*4);return L.sigBytes=F*4,o.create({key:L,iv:z,salt:j})}},R=C.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:_}),encrypt:function(B,F,w,j){j=this.cfg.extend(j);var H=j.kdf.execute(w,B.keySize,B.ivSize,j.salt,j.hasher);j.iv=H.iv;var L=b.encrypt.call(this,B,F,H.key,j);return L.mixIn(H),L},decrypt:function(B,F,w,j){j=this.cfg.extend(j),F=this._parse(F,j.format);var H=j.kdf.execute(w,B.keySize,B.ivSize,F.salt,j.hasher);j.iv=H.iv;var L=b.decrypt.call(this,B,F,H.key,j);return L}})}()})}(Q0)),Q0.exports}var Y0={exports:{}},Ve;function et(){return Ve||(Ve=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.mode.CFB=function(){var t=n.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(C,A){var v=this._cipher,g=v.blockSize;u.call(this,C,A,g,v),this._prevBlock=C.slice(A,A+g)}}),t.Decryptor=t.extend({processBlock:function(C,A){var v=this._cipher,g=v.blockSize,e=C.slice(A,A+g);u.call(this,C,A,g,v),this._prevBlock=e}});function u(C,A,v,g){var e,s=this._iv;s?(e=s.slice(0),this._iv=void 0):e=this._prevBlock,g.encryptBlock(e,0);for(var m=0;m<v;m++)C[A+m]^=e[m]}return t}(),n.mode.CFB})}(Y0)),Y0.exports}var J0={exports:{}},Xe;function rt(){return Xe||(Xe=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.mode.CTR=function(){var t=n.lib.BlockCipherMode.extend(),u=t.Encryptor=t.extend({processBlock:function(C,A){var v=this._cipher,g=v.blockSize,e=this._iv,s=this._counter;e&&(s=this._counter=e.slice(0),this._iv=void 0);var m=s.slice(0);v.encryptBlock(m,0),s[g-1]=s[g-1]+1|0;for(var a=0;a<g;a++)C[A+a]^=m[a]}});return t.Decryptor=u,t}(),n.mode.CTR})}(J0)),J0.exports}var ee={exports:{}},Ze;function tt(){return Ze||(Ze=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var t=n.lib.BlockCipherMode.extend();function u(v){if((v>>24&255)===255){var g=v>>16&255,e=v>>8&255,s=v&255;g===255?(g=0,e===255?(e=0,s===255?s=0:++s):++e):++g,v=0,v+=g<<16,v+=e<<8,v+=s}else v+=1<<24;return v}function C(v){return(v[0]=u(v[0]))===0&&(v[1]=u(v[1])),v}var A=t.Encryptor=t.extend({processBlock:function(v,g){var e=this._cipher,s=e.blockSize,m=this._iv,a=this._counter;m&&(a=this._counter=m.slice(0),this._iv=void 0),C(a);var d=a.slice(0);e.encryptBlock(d,0);for(var c=0;c<s;c++)v[g+c]^=d[c]}});return t.Decryptor=A,t}(),n.mode.CTRGladman})}(ee)),ee.exports}var re={exports:{}},Qe;function nt(){return Qe||(Qe=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.mode.OFB=function(){var t=n.lib.BlockCipherMode.extend(),u=t.Encryptor=t.extend({processBlock:function(C,A){var v=this._cipher,g=v.blockSize,e=this._iv,s=this._keystream;e&&(s=this._keystream=e.slice(0),this._iv=void 0),v.encryptBlock(s,0);for(var m=0;m<g;m++)C[A+m]^=s[m]}});return t.Decryptor=u,t}(),n.mode.OFB})}(re)),re.exports}var te={exports:{}},Ye;function at(){return Ye||(Ye=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.mode.ECB=function(){var t=n.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(u,C){this._cipher.encryptBlock(u,C)}}),t.Decryptor=t.extend({processBlock:function(u,C){this._cipher.decryptBlock(u,C)}}),t}(),n.mode.ECB})}(te)),te.exports}var ne={exports:{}},Je;function st(){return Je||(Je=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.pad.AnsiX923={pad:function(t,u){var C=t.sigBytes,A=u*4,v=A-C%A,g=C+v-1;t.clamp(),t.words[g>>>2]|=v<<24-g%4*8,t.sigBytes+=v},unpad:function(t){var u=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=u}},n.pad.Ansix923})}(ne)),ne.exports}var ae={exports:{}},er;function xt(){return er||(er=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.pad.Iso10126={pad:function(t,u){var C=u*4,A=C-t.sigBytes%C;t.concat(n.lib.WordArray.random(A-1)).concat(n.lib.WordArray.create([A<<24],1))},unpad:function(t){var u=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=u}},n.pad.Iso10126})}(ae)),ae.exports}var se={exports:{}},rr;function ot(){return rr||(rr=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.pad.Iso97971={pad:function(t,u){t.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(t,u)},unpad:function(t){n.pad.ZeroPadding.unpad(t),t.sigBytes--}},n.pad.Iso97971})}(se)),se.exports}var xe={exports:{}},tr;function it(){return tr||(tr=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.pad.ZeroPadding={pad:function(t,u){var C=u*4;t.clamp(),t.sigBytes+=C-(t.sigBytes%C||C)},unpad:function(t){for(var u=t.words,C=t.sigBytes-1,C=t.sigBytes-1;C>=0;C--)if(u[C>>>2]>>>24-C%4*8&255){t.sigBytes=C+1;break}}},n.pad.ZeroPadding})}(xe)),xe.exports}var oe={exports:{}},nr;function ct(){return nr||(nr=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(oe)),oe.exports}var ie={exports:{}},ar;function lt(){return ar||(ar=1,function(i,l){(function(n,t,u){i.exports=t(O(),Z())})(I,function(n){return function(t){var u=n,C=u.lib,A=C.CipherParams,v=u.enc,g=v.Hex,e=u.format;e.Hex={stringify:function(s){return s.ciphertext.toString(g)},parse:function(s){var m=g.parse(s);return A.create({ciphertext:m})}}}(),n.format.Hex})}(ie)),ie.exports}var ce={exports:{}},sr;function dt(){return sr||(sr=1,function(i,l){(function(n,t,u){i.exports=t(O(),l0(),d0(),i0(),Z())})(I,function(n){return function(){var t=n,u=t.lib,C=u.BlockCipher,A=t.algo,v=[],g=[],e=[],s=[],m=[],a=[],d=[],c=[],p=[],h=[];(function(){for(var o=[],f=0;f<256;f++)f<128?o[f]=f<<1:o[f]=f<<1^283;for(var y=0,b=0,f=0;f<256;f++){var D=b^b<<1^b<<2^b<<3^b<<4;D=D>>>8^D&255^99,v[y]=D,g[D]=y;var _=o[y],R=o[_],B=o[R],F=o[D]*257^D*16843008;e[y]=F<<24|F>>>8,s[y]=F<<16|F>>>16,m[y]=F<<8|F>>>24,a[y]=F;var F=B*16843009^R*65537^_*257^y*16843008;d[D]=F<<24|F>>>8,c[D]=F<<16|F>>>16,p[D]=F<<8|F>>>24,h[D]=F,y?(y=_^o[o[o[B^_]]],b^=o[o[b]]):y=b=1}})();var E=[0,1,2,4,8,16,32,64,128,27,54],x=A.AES=C.extend({_doReset:function(){var o;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var f=this._keyPriorReset=this._key,y=f.words,b=f.sigBytes/4,D=this._nRounds=b+6,_=(D+1)*4,R=this._keySchedule=[],B=0;B<_;B++)B<b?R[B]=y[B]:(o=R[B-1],B%b?b>6&&B%b==4&&(o=v[o>>>24]<<24|v[o>>>16&255]<<16|v[o>>>8&255]<<8|v[o&255]):(o=o<<8|o>>>24,o=v[o>>>24]<<24|v[o>>>16&255]<<16|v[o>>>8&255]<<8|v[o&255],o^=E[B/b|0]<<24),R[B]=R[B-b]^o);for(var F=this._invKeySchedule=[],w=0;w<_;w++){var B=_-w;if(w%4)var o=R[B];else var o=R[B-4];w<4||B<=4?F[w]=o:F[w]=d[v[o>>>24]]^c[v[o>>>16&255]]^p[v[o>>>8&255]]^h[v[o&255]]}}},encryptBlock:function(o,f){this._doCryptBlock(o,f,this._keySchedule,e,s,m,a,v)},decryptBlock:function(o,f){var y=o[f+1];o[f+1]=o[f+3],o[f+3]=y,this._doCryptBlock(o,f,this._invKeySchedule,d,c,p,h,g);var y=o[f+1];o[f+1]=o[f+3],o[f+3]=y},_doCryptBlock:function(o,f,y,b,D,_,R,B){for(var F=this._nRounds,w=o[f]^y[0],j=o[f+1]^y[1],H=o[f+2]^y[2],L=o[f+3]^y[3],z=4,$=1;$<F;$++){var U=b[w>>>24]^D[j>>>16&255]^_[H>>>8&255]^R[L&255]^y[z++],M=b[j>>>24]^D[H>>>16&255]^_[L>>>8&255]^R[w&255]^y[z++],q=b[H>>>24]^D[L>>>16&255]^_[w>>>8&255]^R[j&255]^y[z++],k=b[L>>>24]^D[w>>>16&255]^_[j>>>8&255]^R[H&255]^y[z++];w=U,j=M,H=q,L=k}var U=(B[w>>>24]<<24|B[j>>>16&255]<<16|B[H>>>8&255]<<8|B[L&255])^y[z++],M=(B[j>>>24]<<24|B[H>>>16&255]<<16|B[L>>>8&255]<<8|B[w&255])^y[z++],q=(B[H>>>24]<<24|B[L>>>16&255]<<16|B[w>>>8&255]<<8|B[j&255])^y[z++],k=(B[L>>>24]<<24|B[w>>>16&255]<<16|B[j>>>8&255]<<8|B[H&255])^y[z++];o[f]=U,o[f+1]=M,o[f+2]=q,o[f+3]=k},keySize:256/32});t.AES=C._createHelper(x)}(),n.AES})}(ce)),ce.exports}var le={exports:{}},xr;function ft(){return xr||(xr=1,function(i,l){(function(n,t,u){i.exports=t(O(),l0(),d0(),i0(),Z())})(I,function(n){return function(){var t=n,u=t.lib,C=u.WordArray,A=u.BlockCipher,v=t.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],e=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],a=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=v.DES=A.extend({_doReset:function(){for(var E=this._key,x=E.words,o=[],f=0;f<56;f++){var y=g[f]-1;o[f]=x[y>>>5]>>>31-y%32&1}for(var b=this._subKeys=[],D=0;D<16;D++){for(var _=b[D]=[],R=s[D],f=0;f<24;f++)_[f/6|0]|=o[(e[f]-1+R)%28]<<31-f%6,_[4+(f/6|0)]|=o[28+(e[f+24]-1+R)%28]<<31-f%6;_[0]=_[0]<<1|_[0]>>>31;for(var f=1;f<7;f++)_[f]=_[f]>>>(f-1)*4+3;_[7]=_[7]<<5|_[7]>>>27}for(var B=this._invSubKeys=[],f=0;f<16;f++)B[f]=b[15-f]},encryptBlock:function(E,x){this._doCryptBlock(E,x,this._subKeys)},decryptBlock:function(E,x){this._doCryptBlock(E,x,this._invSubKeys)},_doCryptBlock:function(E,x,o){this._lBlock=E[x],this._rBlock=E[x+1],c.call(this,4,252645135),c.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),c.call(this,1,1431655765);for(var f=0;f<16;f++){for(var y=o[f],b=this._lBlock,D=this._rBlock,_=0,R=0;R<8;R++)_|=m[R][((D^y[R])&a[R])>>>0];this._lBlock=D,this._rBlock=b^_}var B=this._lBlock;this._lBlock=this._rBlock,this._rBlock=B,c.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),c.call(this,16,65535),c.call(this,4,252645135),E[x]=this._lBlock,E[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function c(E,x){var o=(this._lBlock>>>E^this._rBlock)&x;this._rBlock^=o,this._lBlock^=o<<E}function p(E,x){var o=(this._rBlock>>>E^this._lBlock)&x;this._lBlock^=o,this._rBlock^=o<<E}t.DES=A._createHelper(d);var h=v.TripleDES=A.extend({_doReset:function(){var E=this._key,x=E.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var o=x.slice(0,2),f=x.length<4?x.slice(0,2):x.slice(2,4),y=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=d.createEncryptor(C.create(o)),this._des2=d.createEncryptor(C.create(f)),this._des3=d.createEncryptor(C.create(y))},encryptBlock:function(E,x){this._des1.encryptBlock(E,x),this._des2.decryptBlock(E,x),this._des3.encryptBlock(E,x)},decryptBlock:function(E,x){this._des3.decryptBlock(E,x),this._des2.encryptBlock(E,x),this._des1.decryptBlock(E,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});t.TripleDES=A._createHelper(h)}(),n.TripleDES})}(le)),le.exports}var de={exports:{}},or;function ht(){return or||(or=1,function(i,l){(function(n,t,u){i.exports=t(O(),l0(),d0(),i0(),Z())})(I,function(n){return function(){var t=n,u=t.lib,C=u.StreamCipher,A=t.algo,v=A.RC4=C.extend({_doReset:function(){for(var s=this._key,m=s.words,a=s.sigBytes,d=this._S=[],c=0;c<256;c++)d[c]=c;for(var c=0,p=0;c<256;c++){var h=c%a,E=m[h>>>2]>>>24-h%4*8&255;p=(p+d[c]+E)%256;var x=d[c];d[c]=d[p],d[p]=x}this._i=this._j=0},_doProcessBlock:function(s,m){s[m]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var s=this._S,m=this._i,a=this._j,d=0,c=0;c<4;c++){m=(m+1)%256,a=(a+s[m])%256;var p=s[m];s[m]=s[a],s[a]=p,d|=s[(s[m]+s[a])%256]<<24-c*8}return this._i=m,this._j=a,d}t.RC4=C._createHelper(v);var e=A.RC4Drop=v.extend({cfg:v.cfg.extend({drop:192}),_doReset:function(){v._doReset.call(this);for(var s=this.cfg.drop;s>0;s--)g.call(this)}});t.RC4Drop=C._createHelper(e)}(),n.RC4})}(de)),de.exports}var fe={exports:{}},ir;function ut(){return ir||(ir=1,function(i,l){(function(n,t,u){i.exports=t(O(),l0(),d0(),i0(),Z())})(I,function(n){return function(){var t=n,u=t.lib,C=u.StreamCipher,A=t.algo,v=[],g=[],e=[],s=A.Rabbit=C.extend({_doReset:function(){for(var a=this._key.words,d=this.cfg.iv,c=0;c<4;c++)a[c]=(a[c]<<8|a[c]>>>24)&16711935|(a[c]<<24|a[c]>>>8)&4278255360;var p=this._X=[a[0],a[3]<<16|a[2]>>>16,a[1],a[0]<<16|a[3]>>>16,a[2],a[1]<<16|a[0]>>>16,a[3],a[2]<<16|a[1]>>>16],h=this._C=[a[2]<<16|a[2]>>>16,a[0]&4294901760|a[1]&65535,a[3]<<16|a[3]>>>16,a[1]&4294901760|a[2]&65535,a[0]<<16|a[0]>>>16,a[2]&4294901760|a[3]&65535,a[1]<<16|a[1]>>>16,a[3]&4294901760|a[0]&65535];this._b=0;for(var c=0;c<4;c++)m.call(this);for(var c=0;c<8;c++)h[c]^=p[c+4&7];if(d){var E=d.words,x=E[0],o=E[1],f=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,b=f>>>16|y&4294901760,D=y<<16|f&65535;h[0]^=f,h[1]^=b,h[2]^=y,h[3]^=D,h[4]^=f,h[5]^=b,h[6]^=y,h[7]^=D;for(var c=0;c<4;c++)m.call(this)}},_doProcessBlock:function(a,d){var c=this._X;m.call(this),v[0]=c[0]^c[5]>>>16^c[3]<<16,v[1]=c[2]^c[7]>>>16^c[5]<<16,v[2]=c[4]^c[1]>>>16^c[7]<<16,v[3]=c[6]^c[3]>>>16^c[1]<<16;for(var p=0;p<4;p++)v[p]=(v[p]<<8|v[p]>>>24)&16711935|(v[p]<<24|v[p]>>>8)&4278255360,a[d+p]^=v[p]},blockSize:128/32,ivSize:64/32});function m(){for(var a=this._X,d=this._C,c=0;c<8;c++)g[c]=d[c];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<g[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<g[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<g[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<g[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<g[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<g[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<g[6]>>>0?1:0)|0,this._b=d[7]>>>0<g[7]>>>0?1:0;for(var c=0;c<8;c++){var p=a[c]+d[c],h=p&65535,E=p>>>16,x=((h*h>>>17)+h*E>>>15)+E*E,o=((p&4294901760)*p|0)+((p&65535)*p|0);e[c]=x^o}a[0]=e[0]+(e[7]<<16|e[7]>>>16)+(e[6]<<16|e[6]>>>16)|0,a[1]=e[1]+(e[0]<<8|e[0]>>>24)+e[7]|0,a[2]=e[2]+(e[1]<<16|e[1]>>>16)+(e[0]<<16|e[0]>>>16)|0,a[3]=e[3]+(e[2]<<8|e[2]>>>24)+e[1]|0,a[4]=e[4]+(e[3]<<16|e[3]>>>16)+(e[2]<<16|e[2]>>>16)|0,a[5]=e[5]+(e[4]<<8|e[4]>>>24)+e[3]|0,a[6]=e[6]+(e[5]<<16|e[5]>>>16)+(e[4]<<16|e[4]>>>16)|0,a[7]=e[7]+(e[6]<<8|e[6]>>>24)+e[5]|0}t.Rabbit=C._createHelper(s)}(),n.Rabbit})}(fe)),fe.exports}var he={exports:{}},cr;function vt(){return cr||(cr=1,function(i,l){(function(n,t,u){i.exports=t(O(),l0(),d0(),i0(),Z())})(I,function(n){return function(){var t=n,u=t.lib,C=u.StreamCipher,A=t.algo,v=[],g=[],e=[],s=A.RabbitLegacy=C.extend({_doReset:function(){var a=this._key.words,d=this.cfg.iv,c=this._X=[a[0],a[3]<<16|a[2]>>>16,a[1],a[0]<<16|a[3]>>>16,a[2],a[1]<<16|a[0]>>>16,a[3],a[2]<<16|a[1]>>>16],p=this._C=[a[2]<<16|a[2]>>>16,a[0]&4294901760|a[1]&65535,a[3]<<16|a[3]>>>16,a[1]&4294901760|a[2]&65535,a[0]<<16|a[0]>>>16,a[2]&4294901760|a[3]&65535,a[1]<<16|a[1]>>>16,a[3]&4294901760|a[0]&65535];this._b=0;for(var h=0;h<4;h++)m.call(this);for(var h=0;h<8;h++)p[h]^=c[h+4&7];if(d){var E=d.words,x=E[0],o=E[1],f=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,b=f>>>16|y&4294901760,D=y<<16|f&65535;p[0]^=f,p[1]^=b,p[2]^=y,p[3]^=D,p[4]^=f,p[5]^=b,p[6]^=y,p[7]^=D;for(var h=0;h<4;h++)m.call(this)}},_doProcessBlock:function(a,d){var c=this._X;m.call(this),v[0]=c[0]^c[5]>>>16^c[3]<<16,v[1]=c[2]^c[7]>>>16^c[5]<<16,v[2]=c[4]^c[1]>>>16^c[7]<<16,v[3]=c[6]^c[3]>>>16^c[1]<<16;for(var p=0;p<4;p++)v[p]=(v[p]<<8|v[p]>>>24)&16711935|(v[p]<<24|v[p]>>>8)&4278255360,a[d+p]^=v[p]},blockSize:128/32,ivSize:64/32});function m(){for(var a=this._X,d=this._C,c=0;c<8;c++)g[c]=d[c];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<g[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<g[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<g[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<g[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<g[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<g[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<g[6]>>>0?1:0)|0,this._b=d[7]>>>0<g[7]>>>0?1:0;for(var c=0;c<8;c++){var p=a[c]+d[c],h=p&65535,E=p>>>16,x=((h*h>>>17)+h*E>>>15)+E*E,o=((p&4294901760)*p|0)+((p&65535)*p|0);e[c]=x^o}a[0]=e[0]+(e[7]<<16|e[7]>>>16)+(e[6]<<16|e[6]>>>16)|0,a[1]=e[1]+(e[0]<<8|e[0]>>>24)+e[7]|0,a[2]=e[2]+(e[1]<<16|e[1]>>>16)+(e[0]<<16|e[0]>>>16)|0,a[3]=e[3]+(e[2]<<8|e[2]>>>24)+e[1]|0,a[4]=e[4]+(e[3]<<16|e[3]>>>16)+(e[2]<<16|e[2]>>>16)|0,a[5]=e[5]+(e[4]<<8|e[4]>>>24)+e[3]|0,a[6]=e[6]+(e[5]<<16|e[5]>>>16)+(e[4]<<16|e[4]>>>16)|0,a[7]=e[7]+(e[6]<<8|e[6]>>>24)+e[5]|0}t.RabbitLegacy=C._createHelper(s)}(),n.RabbitLegacy})}(he)),he.exports}var ue={exports:{}},lr;function pt(){return lr||(lr=1,function(i,l){(function(n,t,u){i.exports=t(O(),l0(),d0(),i0(),Z())})(I,function(n){return function(){var t=n,u=t.lib,C=u.BlockCipher,A=t.algo;const v=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],e=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function m(h,E){let x=E>>24&255,o=E>>16&255,f=E>>8&255,y=E&255,b=h.sbox[0][x]+h.sbox[1][o];return b=b^h.sbox[2][f],b=b+h.sbox[3][y],b}function a(h,E,x){let o=E,f=x,y;for(let b=0;b<v;++b)o=o^h.pbox[b],f=m(h,o)^f,y=o,o=f,f=y;return y=o,o=f,f=y,f=f^h.pbox[v],o=o^h.pbox[v+1],{left:o,right:f}}function d(h,E,x){let o=E,f=x,y;for(let b=v+1;b>1;--b)o=o^h.pbox[b],f=m(h,o)^f,y=o,o=f,f=y;return y=o,o=f,f=y,f=f^h.pbox[1],o=o^h.pbox[0],{left:o,right:f}}function c(h,E,x){for(let D=0;D<4;D++){h.sbox[D]=[];for(let _=0;_<256;_++)h.sbox[D][_]=e[D][_]}let o=0;for(let D=0;D<v+2;D++)h.pbox[D]=g[D]^E[o],o++,o>=x&&(o=0);let f=0,y=0,b=0;for(let D=0;D<v+2;D+=2)b=a(h,f,y),f=b.left,y=b.right,h.pbox[D]=f,h.pbox[D+1]=y;for(let D=0;D<4;D++)for(let _=0;_<256;_+=2)b=a(h,f,y),f=b.left,y=b.right,h.sbox[D][_]=f,h.sbox[D][_+1]=y;return!0}var p=A.Blowfish=C.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var h=this._keyPriorReset=this._key,E=h.words,x=h.sigBytes/4;c(s,E,x)}},encryptBlock:function(h,E){var x=a(s,h[E],h[E+1]);h[E]=x.left,h[E+1]=x.right},decryptBlock:function(h,E){var x=d(s,h[E],h[E+1]);h[E]=x.left,h[E+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});t.Blowfish=C._createHelper(p)}(),n.Blowfish})}(ue)),ue.exports}(function(i,l){(function(n,t,u){i.exports=t(O(),k0(),$r(),Gr(),l0(),Vr(),d0(),Cr(),pe(),Xr(),mr(),Zr(),Qr(),Yr(),ge(),Jr(),i0(),Z(),et(),rt(),tt(),nt(),at(),st(),xt(),ot(),it(),ct(),lt(),dt(),ft(),ht(),ut(),vt(),pt())})(I,function(n){return n})})(gr);var gt=gr.exports;const dr=Lr(gt);function fr(i){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let n="";const t=new Uint8Array(i);crypto.getRandomValues(t);for(let u=0;u<i;u++)n+=l[t[u]%l.length];return n}function Ct(i){const l=dr.SHA256(i);return dr.enc.Base64.stringify(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function mt(){const i=fr(W.pkce.codeVerifierLength),l=Ct(i),n=fr(32);return{codeVerifier:i,codeChallenge:l,state:n}}function Bt(i,l){return i===l}const c0=class c0{constructor(){N0(this,"tokenRefreshTimer",null);this.initializeTokenRefresh()}static getInstance(){return c0.instance||(c0.instance=new c0),c0.instance}async login(){try{const l=mt();await V.storePKCEData(l.codeVerifier,l.state);const{callbackUrl:n}=S0(),{authUrl:t}=A0(),u=new URLSearchParams({client_id:o0.clientId,response_type:T0.responseType,scope:T0.scopes.join(" "),redirect_uri:n,state:l.state,code_challenge:l.codeChallenge,code_challenge_method:W.pkce.codeChallengeMethod}),C=`${t}?${u.toString()}`;chrome.windows.create({url:C,type:"popup",width:500,height:600})}catch(l){throw console.error("Login error:",l),this.createAuthError(a0.OAUTH_ERROR,"Failed to initiate login")}}async handleCallback(l,n){try{const t=await V.getPKCEData();if(!t)throw this.createAuthError(a0.OAUTH_ERROR,"PKCE data not found");if(!Bt(n,t.state))throw this.createAuthError(a0.OAUTH_ERROR,"Invalid state parameter");const u=await this.exchangeCodeForTokens(l,t.codeVerifier);await V.storeTokens(u);const C=await this.fetchUserInfo(u.accessToken);return await V.storeUserInfo(C),this.scheduleTokenRefresh(u.expiresAt),u}catch(t){throw console.error("Callback handling error:",t),t}}async exchangeCodeForTokens(l,n){const{callbackUrl:t}=S0(),{tokenUrl:u}=A0(),C=new URLSearchParams({grant_type:T0.grantType,client_id:o0.clientId,code:l,redirect_uri:t,code_verifier:n});try{const A=await fetch(u,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:C.toString()});if(!A.ok){const g=await A.json().catch(()=>({}));throw this.createAuthError(a0.OAUTH_ERROR,g.error_description||"Token exchange failed")}const v=await A.json();return{accessToken:v.access_token,refreshToken:v.refresh_token,idToken:v.id_token,expiresAt:V.calculateExpirationTime(v.expires_in)}}catch(A){throw console.error("Token exchange error:",A),this.createAuthError(a0.NETWORK_ERROR,"Failed to exchange code for tokens")}}async refreshToken(){const l=await V.getTokens();if(!l||!l.refreshToken)throw this.createAuthError(a0.INVALID_TOKEN,"No refresh token available");const{tokenUrl:n}=A0(),t=new URLSearchParams({grant_type:"refresh_token",client_id:o0.clientId,refresh_token:l.refreshToken});let u=0;const C=W.tokenRefresh.maxRetryAttempts;for(;u<C;)try{const A=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()});if(!A.ok){const e=await A.json().catch(()=>({}));throw this.createAuthError(a0.REFRESH_FAILED,e.error_description||"Token refresh failed")}const v=await A.json(),g={accessToken:v.access_token,refreshToken:v.refresh_token||l.refreshToken,idToken:v.id_token,expiresAt:V.calculateExpirationTime(v.expires_in)};return await V.storeTokens(g),this.scheduleTokenRefresh(g.expiresAt),g}catch(A){if(u++,u>=C)throw console.error("Token refresh failed after retries:",A),A;await this.delay(W.tokenRefresh.retryDelayMs*u)}throw this.createAuthError(a0.REFRESH_FAILED,"Token refresh failed after retries")}async fetchUserInfo(l){const{userInfoUrl:n}=A0();try{const t=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${l}`}});if(!t.ok)throw this.createAuthError(a0.NETWORK_ERROR,"Failed to fetch user info");return await t.json()}catch(t){throw console.error("User info fetch error:",t),this.createAuthError(a0.NETWORK_ERROR,"Failed to fetch user information")}}async logout(){try{const l=await V.getTokens();if(await V.clearAuthData(),this.tokenRefreshTimer&&(clearTimeout(this.tokenRefreshTimer),this.tokenRefreshTimer=null),l){const{signoutUrl:n}=S0(),{logoutUrl:t}=A0(),u=new URLSearchParams({client_id:o0.clientId,logout_uri:n}),C=`${t}?${u.toString()}`;chrome.windows.create({url:C,type:"popup",width:500,height:600})}}catch(l){console.error("Logout error:",l),await V.clearAuthData()}}async getAuthState(){try{const l=await V.getTokens(),n=await V.getUserInfo();if(!l||!l.accessToken)return Q.UNAUTHENTICATED;if(V.isTokenExpired(l.expiresAt))try{return await this.refreshToken(),Q.AUTHENTICATED}catch{return Q.UNAUTHENTICATED}return n?Q.AUTHENTICATED:Q.LOADING}catch(l){return console.error("Get auth state error:",l),Q.ERROR}}async getCurrentUser(){return await V.getUserInfo()}async getValidAccessToken(){const l=await V.getTokens();if(!l)return null;if(V.isTokenExpired(l.expiresAt))try{return(await this.refreshToken()).accessToken}catch(n){return console.error("Failed to refresh token:",n),null}return l.accessToken}initializeTokenRefresh(){V.getTokens().then(l=>{l&&!V.isTokenExpired(l.expiresAt)&&this.scheduleTokenRefresh(l.expiresAt)})}scheduleTokenRefresh(l){this.tokenRefreshTimer&&clearTimeout(this.tokenRefreshTimer);const n=Date.now(),t=W.tokenRefresh.refreshThresholdMinutes*60*1e3,u=l-t-n;u>0&&(this.tokenRefreshTimer=window.setTimeout(async()=>{try{await this.refreshToken()}catch(C){console.error("Scheduled token refresh failed:",C),await this.logout()}},u))}createAuthError(l,n){return{type:l,message:n}}delay(l){return new Promise(n=>setTimeout(n,l))}};N0(c0,"instance");let ve=c0;const b0=ve.getInstance(),Et=({collapsed:i=!1})=>{var m;const[l,n]=X.useState(null),[t,u]=X.useState(!1),[C,A]=X.useState(!1);X.useEffect(()=>{v()},[]);const v=async()=>{const a=await b0.getCurrentUser();n(a)},g=async()=>{A(!0);try{await b0.logout()}catch(a){console.error("Logout failed:",a),A(!1)}};if(!l)return null;const e=l.name||l.given_name||((m=l.email)==null?void 0:m.split("@")[0])||"User",s=e.substring(0,2).toUpperCase();return i?r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>u(!t),className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-medium hover:bg-blue-700 transition-colors",title:e,children:s}),t&&r.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-gray-700 rounded-lg shadow-lg border border-gray-600 overflow-hidden",children:[r.jsxs("div",{className:"p-3 border-b border-gray-600",children:[r.jsx("p",{className:"text-sm font-medium text-white truncate",children:e}),r.jsx("p",{className:"text-xs text-gray-400 truncate",children:l.email})]}),r.jsxs("button",{onClick:g,disabled:C,className:"w-full px-3 py-2 text-left text-sm text-red-400 hover:bg-gray-600 transition-colors flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),r.jsx("span",{children:C?"Đang đăng xuất...":"Đăng xuất"})]})]})]}):r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>u(!t),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-medium flex-shrink-0",children:s}),r.jsxs("div",{className:"flex-1 text-left min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-white truncate",children:e}),r.jsx("p",{className:"text-xs text-gray-400 truncate",children:l.email})]}),r.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t&&r.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-gray-700 rounded-lg shadow-lg border border-gray-600 overflow-hidden",children:r.jsxs("button",{onClick:g,disabled:C,className:"w-full px-4 py-3 text-left text-sm text-red-400 hover:bg-gray-600 transition-colors flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),r.jsx("span",{children:C?"Đang đăng xuất...":"Đăng xuất"})]})})]})},At=[{id:"chatbox",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),label:"ChatBox",tooltip:"Trò chuyện với AI"},{id:"mcp",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),label:"MCP Management",tooltip:"Quản lý Kết nối MCP"},{id:"autoconnect",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"Auto-Connect",tooltip:"Tác nhận tự động"}],bt=()=>{const{state:i,dispatch:l}=y0(),{activeSection:n,leftNavCollapsed:t}=i.ui,u=A=>{l({type:"SET_ACTIVE_SECTION",payload:A})},C=()=>{l({type:"TOGGLE_LEFT_NAV"})};return r.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[!t&&r.jsx("h1",{className:"text-lg font-semibold text-white",children:"Extension"}),r.jsx("button",{onClick:C,className:"p-2 rounded-lg hover:bg-gray-700 transition-colors text-gray-400 hover:text-white",title:t?"Expand sidebar":"Collapse sidebar",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:t?"M9 5l7 7-7 7":"M15 19l-7-7 7-7"})})})]})}),r.jsx("nav",{className:"flex-1 p-4",children:r.jsx("ul",{className:"space-y-2",children:At.map(A=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>u(A.id),className:`
                  w-full flex items-center p-3 rounded-lg transition-all duration-200
                  ${n===A.id?"bg-blue-600 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                  ${t?"justify-center":"justify-start"}
                `,title:t?A.tooltip:"",children:[r.jsx("span",{className:"flex-shrink-0",children:A.icon}),!t&&r.jsx("span",{className:"ml-3 text-sm font-medium",children:A.label})]})},A.id))})}),r.jsxs("div",{className:"p-4 border-t border-gray-700",children:[r.jsx(Et,{collapsed:t}),!t&&r.jsx("div",{className:"text-xs text-gray-400 text-center mt-3",children:"v1.0.0"})]})]})},yt=({visible:i,content:l,sources:n=[]})=>{if(!i||l==="none")return null;const t=A=>{switch(A){case"document":return"📄";case"file":return"📁";case"web":return"🌐";case"chat":return"💬";default:return"📄"}},u=A=>A?` • ${A}`:"",C=A=>{const v=new Date,g=new Date(A),e=v.getTime()-g.getTime(),s=Math.floor(e/(1e3*60)),m=Math.floor(e/(1e3*60*60)),a=Math.floor(e/(1e3*60*60*24));return s<1?"Vừa xong":s<60?`${s} phút trước`:m<24?`${m} giờ trước`:`${a} ngày trước`};return r.jsx("div",{className:"w-80 sm:w-72 md:w-80 bg-gray-800 border-l border-gray-700 flex-shrink-0 h-full overflow-hidden",children:l==="sources"&&r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Nguồn gần đây"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Tài liệu và tệp đã sử dụng"})]})})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:n.length===0?r.jsxs("div",{className:"p-4 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-700 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Chưa có nguồn dữ liệu nào"})]}):r.jsx("div",{className:"p-4 space-y-3",children:n.map(A=>r.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:t(A.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-white truncate",children:A.name}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[C(A.timestamp),u(A.size)]}),A.path&&r.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:A.path})]})]})},A.id))})}),r.jsxs("div",{className:"p-4 space-y-3 border-t border-gray-700",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Tài liệu mẫu"}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:"📄"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-white",children:"Banking Terms"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Credit_Default_Swap.pdf"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Sử dụng 2 phút trước"})]})]})}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:"📊"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-white",children:"Finance Docs"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"derivatives_overview.docx"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Sử dụng 15 phút trước"})]})]})}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:"💬"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-white",children:"Team Chat"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"#finance-discussion"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Sử dụng 1 giờ trước"})]})]})})]})]})})},Dt=({message:i})=>{const l=i.sender==="user";return r.jsx("div",{className:`flex ${l?"justify-end":"justify-start"} mb-4`,children:r.jsxs("div",{className:`max-w-[80%] ${l?"order-2":"order-1"}`,children:[!l&&r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mr-2",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),r.jsx("span",{className:"text-sm text-gray-400",children:"AI Assistant"})]}),r.jsxs("div",{className:`
          rounded-2xl px-4 py-3 text-sm
          ${l?"bg-blue-600 text-white rounded-br-md":"bg-gray-800 text-gray-100 rounded-bl-md border border-gray-700"}
        `,children:[r.jsx("p",{className:"whitespace-pre-wrap",children:i.content}),i.sources&&i.sources.length>0&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsx("p",{className:"text-xs text-gray-300 mb-2",children:"Nguồn dữ liệu tham khảo:"}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsxs("div",{className:"flex items-center text-xs text-gray-300",children:[r.jsx("span",{className:"mr-2",children:"📄"}),r.jsx("span",{className:"flex-1",children:i.sources[0].name})]})})]})]}),r.jsx("div",{className:`text-xs text-gray-500 mt-1 ${l?"text-right":"text-left"}`,children:new Date(i.timestamp).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})})},Ft=({onSendMessage:i,disabled:l=!1})=>{const[n,t]=X.useState(""),u=X.useRef(null),C=g=>{g.preventDefault(),n.trim()&&!l&&(i(n),t(""),u.current&&(u.current.style.height="auto"))},A=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),C(g))},v=g=>{t(g.target.value),u.current&&(u.current.style.height="auto",u.current.style.height=`${u.current.scrollHeight}px`)};return X.useEffect(()=>{u.current&&u.current.focus()},[]),r.jsxs("form",{onSubmit:C,className:"flex items-end space-x-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("textarea",{ref:u,value:n,onChange:v,onKeyDown:A,placeholder:"Hỏi bất cứ điều gì về nguồn dữ liệu...",disabled:l,className:"w-full bg-gray-800 border border-gray-600 rounded-2xl px-4 py-3 pr-12 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px] max-h-32",rows:1}),r.jsx("button",{type:"button",className:"absolute right-3 bottom-3 p-1 text-gray-400 hover:text-gray-300 transition-colors",title:"Đính kèm tệp",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})})]}),r.jsx("button",{type:"submit",disabled:!n.trim()||l,className:"flex-shrink-0 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white p-3 rounded-2xl transition-colors",title:"Gửi tin nhắn",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})},hr=()=>{const{state:i,dispatch:l}=y0(),{messages:n,isLoading:t}=i.chat,{rightSidebarVisible:u}=i.ui,C=X.useRef(null),A=()=>{var e;(e=C.current)==null||e.scrollIntoView({behavior:"smooth"})};X.useEffect(()=>{A()},[n]);const v=()=>{l({type:"SET_RIGHT_SIDEBAR_VISIBLE",payload:!u})},g=async e=>{if(!e.trim())return;const s={id:Date.now().toString(),content:e.trim(),sender:"user",timestamp:new Date};l({type:"ADD_CHAT_MESSAGE",payload:s}),l({type:"SET_CHAT_LOADING",payload:!0}),setTimeout(()=>{const m={id:(Date.now()+1).toString(),content:`Tôi hiểu bạn đã hỏi: "${e}". Đây là một phản hồi mẫu từ AI. Trong thực tế, điều này sẽ được kết nối với một dịch vụ AI thực sự.`,sender:"ai",timestamp:new Date,sources:[{id:"1",name:"Credit_Default_Swap.pdf",type:"document",timestamp:new Date,icon:"📄",size:"2.3 MB"}]};l({type:"ADD_CHAT_MESSAGE",payload:m}),l({type:"SET_CHAT_LOADING",payload:!1})},1500)};return r.jsxs("div",{className:"h-full flex flex-col bg-gray-900",children:[r.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Trò chuyện với AI"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Hỏi bất cứ điều gì về dữ liệu kết nối"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:v,className:`
                flex items-center text-xs px-3 py-1.5 rounded-full border transition-all duration-200
                ${u?"text-blue-400 bg-blue-500/20 border-blue-500/40 shadow-sm":"text-gray-400 bg-gray-500/10 border-gray-500/20 hover:text-blue-400 hover:bg-blue-500/10 hover:border-blue-500/20"}
              `,title:u?"Ẩn nguồn gần đây":"Hiện nguồn gần đây",children:[r.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"font-medium",children:"Nguồn"}),r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ml-1.5 transition-colors ${u?"bg-blue-400":"bg-green-500"}`})]}),r.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"+ Cuộc trò chuyện mới"})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:n.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-800 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),r.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Bắt đầu cuộc trò chuyện"}),r.jsx("p",{className:"text-gray-400 max-w-md",children:"Hỏi tôi về bất kỳ điều gì liên quan đến dữ liệu của bạn, tài liệu hoặc các kết nối MCP."})]})}):r.jsxs(r.Fragment,{children:[n.map(e=>r.jsx(Dt,{message:e},e.id)),t&&r.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),r.jsx("span",{className:"text-sm",children:"AI đang trả lời..."})]}),r.jsx("div",{ref:C})]})}),r.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-700",children:r.jsx(Ft,{onSendMessage:g,disabled:t})})]})},_t=({connection:i,onToggle:l,onConfigure:n,onDelete:t})=>{const u=v=>{switch(v){case"connected":return"text-green-400 bg-green-400/10";case"syncing":return"text-yellow-400 bg-yellow-400/10";case"disconnected":return"text-gray-400 bg-gray-400/10";case"error":return"text-red-400 bg-red-400/10";default:return"text-gray-400 bg-gray-400/10"}},C=v=>{switch(v){case"connected":return"Connected";case"syncing":return"Syncing";case"disconnected":return"Disconnected";case"error":return"Error";default:return"Unknown"}},A=v=>{const g=new Date,e=new Date(v),s=g.getTime()-e.getTime(),m=Math.floor(s/(1e3*60)),a=Math.floor(s/(1e3*60*60)),d=Math.floor(s/(1e3*60*60*24));return m<1?"Just now":m<60?`${m} minutes ago`:a<24?`${a} hour${a>1?"s":""} ago`:`${d} day${d>1?"s":""} ago`};return r.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-gray-600 transition-all duration-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-2xl",children:i.icon}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:i.name}),r.jsx("p",{className:"text-sm text-gray-400",children:i.description})]})]}),r.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(i.status)}`,children:r.jsxs("div",{className:"flex items-center space-x-1",children:[i.status==="syncing"&&r.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-pulse"}),r.jsx("span",{children:C(i.status)})]})})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("p",{className:"text-xs text-gray-500",children:["Last sync: ",A(i.lastSync)]})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Configure",children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",title:"Delete",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),r.jsx("button",{onClick:l,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${i.status==="connected"||i.status==="syncing"?"bg-blue-600":"bg-gray-600"}`,disabled:i.status==="syncing",children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.status==="connected"||i.status==="syncing"?"translate-x-6":"translate-x-1"}`})})]})]})},kt=()=>{const{state:i}=y0(),{connections:l,isLoading:n}=i.mcp,t=[{id:"1",name:"Local Files",type:"local-files",status:"connected",lastSync:new Date(Date.now()-2*60*1e3),description:"Desktop & Documents",icon:"📁",settings:{}},{id:"2",name:"SharePoint",type:"sharepoint",status:"connected",lastSync:new Date(Date.now()-60*60*1e3),description:"Corporate Documents",icon:"🏢",settings:{}},{id:"3",name:"Confluence",type:"confluence",status:"disconnected",lastSync:new Date(Date.now()-3*24*60*60*1e3),description:"Wiki & Knowledge Base",icon:"📚",settings:{}},{id:"4",name:"Google Drive",type:"google-drive",status:"connected",lastSync:new Date(Date.now()-30*60*1e3),description:"Cloud Storage",icon:"☁️",settings:{}},{id:"5",name:"Notion",type:"notion",status:"syncing",lastSync:new Date(Date.now()-5*60*1e3),description:"Workspace & Notes",icon:"📝",settings:{}},{id:"6",name:"Slack",type:"slack",status:"connected",lastSync:new Date(Date.now()-15*60*1e3),description:"Team Communication",icon:"💬",settings:{}}],u=l.length>0?l:t,C=()=>{console.log("Add new connection")},A=e=>{console.log("Toggle connection:",e)},v=e=>{console.log("Configure connection:",e)},g=e=>{console.log("Delete connection:",e)};return n?r.jsx("div",{className:"h-full flex items-center justify-center bg-gray-900",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Đang tải kết nối MCP..."})]})}):r.jsxs("div",{className:"h-full bg-gray-900 overflow-hidden",children:[r.jsx("div",{className:"flex-shrink-0 p-6 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Quản lý Kết nối MCP"}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Kết nối và quản lý các nguồn dữ liệu bên ngoài"})]}),r.jsxs("button",{onClick:C,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:"Thêm Kết nối"})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-800 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),r.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Chưa có kết nối nào"}),r.jsx("p",{className:"text-gray-400 max-w-md mb-4",children:"Thêm kết nối MCP để truy cập dữ liệu từ các nguồn bên ngoài như SharePoint, Google Drive, Notion và nhiều hơn nữa."}),r.jsx("button",{onClick:C,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Thêm Kết nối Đầu tiên"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(e=>r.jsx(_t,{connection:e,onToggle:()=>A(e.id),onConfigure:()=>v(e.id),onDelete:()=>g(e.id)},e.id))})})]})},wt=({rule:i,onToggle:l,onEdit:n,onDelete:t})=>{const u=e=>{switch(e){case"translation":return"🌐";case"content-writer":return"✍️";case"data-analysis":return"📊";default:return"⚡"}},C=e=>{switch(e){case"translation":return"bg-blue-500/10 text-blue-400";case"content-writer":return"bg-purple-500/10 text-purple-400";case"data-analysis":return"bg-green-500/10 text-green-400";default:return"bg-gray-500/10 text-gray-400"}},A=e=>e==="active"?"Active":"Inactive",v=e=>{if(!e)return"Never run";const s=new Date,m=new Date(e),a=s.getTime()-m.getTime(),d=Math.floor(a/(1e3*60)),c=Math.floor(a/(1e3*60*60)),p=Math.floor(a/(1e3*60*60*24));return d<1?"Just now":d<60?`${d} minutes ago`:c<24?`${c} hour${c>1?"s":""} ago`:`${p} day${p>1?"s":""} ago`},g=e=>{switch(e.type){case"url-pattern":return`URL matches: ${e.value}`;case"content-type":return`Content type: ${e.value}`;case"schedule":return`Schedule: ${e.value}`;default:return e.value}};return r.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-gray-600 transition-all duration-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"text-2xl mt-1",children:u(i.type)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:i.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(i.type)}`,children:i.type.replace("-"," ")})]}),r.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:i.description})]})]}),r.jsx("button",{onClick:l,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${i.status==="active"?"bg-blue-600":"bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.status==="active"?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Status:"}),r.jsx("span",{className:`font-medium ${i.status==="active"?"text-green-400":"text-gray-400"}`,children:A(i.status)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Trigger:"}),r.jsx("span",{className:"text-gray-300 text-right max-w-xs truncate",children:g(i.trigger)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Last run:"}),r.jsx("span",{className:"text-gray-300",children:v(i.lastRun)})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Edit Rule",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",title:"Delete Rule",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Rule #",i.id]})]})]})},jt=()=>{const{state:i}=y0(),{rules:l,isLoading:n}=i.autoConnect,t=[{id:"1",name:"Hỗ trợ dịch thuật",description:"Giúp bạn dịch nhanh và chính xác các tài liệu từ nhiều ngôn ngữ khác nhau.",type:"translation",status:"active",trigger:{type:"url-pattern",value:"*translate*"},action:{type:"auto-translate",config:{targetLanguage:"vi"}},lastRun:new Date(Date.now()-30*60*1e3)},{id:"2",name:"Content Writer",description:"Giúp bạn sáng tạo và tối ưu nội dung cho nhiều mục đích khác nhau.",type:"content-writer",status:"active",trigger:{type:"content-type",value:"text/html"},action:{type:"content-optimization",config:{style:"professional"}},lastRun:new Date(Date.now()-2*60*60*1e3)},{id:"3",name:"Phân tích dữ liệu",description:"Giúp bạn phân tích dữ liệu, tạo báo cáo và rút ra những insight quan trọng để hỗ trợ quyết định.",type:"data-analysis",status:"inactive",trigger:{type:"schedule",value:"0 9 * * 1"},action:{type:"data-report",config:{format:"pdf"}}}],u=l.length>0?l:t,C=()=>{console.log("Create new rule")},A=e=>{console.log("Toggle rule:",e)},v=e=>{console.log("Edit rule:",e)},g=e=>{console.log("Delete rule:",e)};return n?r.jsx("div",{className:"h-full flex items-center justify-center bg-gray-900",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Đang tải quy tắc tự động..."})]})}):r.jsxs("div",{className:"h-full bg-gray-900 overflow-hidden",children:[r.jsx("div",{className:"flex-shrink-0 p-6 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Tác nhận tự động"}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Quản lý tác nhận tự động"})]}),r.jsxs("button",{onClick:C,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:"Tạo Mới"})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-800 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),r.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Chưa có quy tắc tự động nào"}),r.jsx("p",{className:"text-gray-400 max-w-md mb-4",children:"Tạo quy tắc tự động để hệ thống có thể thực hiện các tác vụ một cách tự động dựa trên điều kiện bạn đặt ra."}),r.jsx("button",{onClick:C,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Tạo Quy tắc Đầu tiên"})]})}):r.jsx("div",{className:"space-y-4",children:u.map(e=>r.jsx(wt,{rule:e,onToggle:()=>A(e.id),onEdit:()=>v(e.id),onDelete:()=>g(e.id)},e.id))})})]})},Nt=({onLoginSuccess:i,onLoginError:l})=>{const[n,t]=X.useState(!1),u=async()=>{t(!0);try{await b0.login(),i==null||i()}catch(C){console.error("Login failed:",C),l==null||l(C)}finally{t(!1)}};return r.jsx("button",{onClick:u,disabled:n,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:n?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Đang đăng nhập..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),r.jsx("span",{children:"Đăng nhập với AWS Cognito"})]})})},Tt=({children:i})=>{const[l,n]=X.useState(Q.LOADING),[t,u]=X.useState(null);X.useEffect(()=>{C(),A()},[]);const C=async()=>{try{const e=await chrome.storage.local.get(["oauth_pending"]);if(e.oauth_pending){const{code:s,state:m}=e.oauth_pending;console.log("Processing pending OAuth callback"),await chrome.storage.local.remove(["oauth_pending"]);try{await b0.handleCallback(s,m),n(Q.AUTHENTICATED),u(null)}catch(a){console.error("OAuth callback processing failed:",a),u("Authentication failed. Please try again."),n(Q.UNAUTHENTICATED)}}}catch(e){console.error("Failed to check pending OAuth:",e)}},A=async()=>{try{console.log("Checking auth state...");const e=await b0.getAuthState();console.log("Auth state:",e),n(e)}catch(e){console.error("Auth state check failed:",e),n(Q.ERROR),u(`Failed to check authentication status: ${e instanceof Error?e.message:"Unknown error"}`)}},v=()=>{n(Q.AUTHENTICATED),u(null)},g=e=>{u(e.message)};return l===Q.LOADING?r.jsx("div",{className:"h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Đang kiểm tra xác thực..."})]})}):l===Q.UNAUTHENTICATED||l===Q.ERROR?r.jsx("div",{className:"h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md p-8",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gray-800 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-10 h-10 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),r.jsx("h2",{className:"text-2xl font-semibold text-white mb-3",children:"Xác thực bắt buộc"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Vui lòng đăng nhập để sử dụng extension. Bạn sẽ được chuyển hướng đến trang đăng nhập AWS Cognito."}),t&&r.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:r.jsx("p",{className:"text-red-400 text-sm",children:t})}),r.jsx(Nt,{onLoginSuccess:v,onLoginError:g})]})}):r.jsx(r.Fragment,{children:i})},St=()=>{const{state:i}=y0(),{activeSection:l,leftNavCollapsed:n,rightSidebarVisible:t}=i.ui,{sources:u}=i.chat,C=()=>{switch(l){case"chatbox":return r.jsx(hr,{});case"mcp":return r.jsx(kt,{});case"autoconnect":return r.jsx(jt,{});default:return r.jsx(hr,{})}},A=()=>l==="chatbox"?r.jsx(yt,{visible:t,content:"sources",sources:u}):null;return r.jsx(Tt,{children:r.jsx(Wr,{activeSection:l,leftNavCollapsed:n,rightSidebarVisible:t,leftNavigation:r.jsx(bt,{}),rightSidebar:A(),children:C()})})};class Rt extends X.Component{constructor(l){super(l),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(l){return{hasError:!0,error:l,errorInfo:null}}componentDidCatch(l,n){console.error("ErrorBoundary caught an error:",l,n),this.setState({error:l,errorInfo:n})}render(){var l;return this.state.hasError?r.jsx("div",{className:"h-screen bg-gray-900 flex items-center justify-center p-8",children:r.jsxs("div",{className:"max-w-2xl w-full bg-gray-800 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("svg",{className:"w-8 h-8 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Application Error"})]}),r.jsx("div",{className:"mb-4",children:r.jsx("p",{className:"text-gray-300 mb-2",children:"Something went wrong. Please try reloading the extension."})}),r.jsxs("details",{className:"mb-4",children:[r.jsx("summary",{className:"cursor-pointer text-blue-400 hover:text-blue-300 mb-2",children:"Show error details"}),r.jsxs("div",{className:"bg-gray-900 rounded p-4 overflow-auto max-h-96",children:[r.jsx("p",{className:"text-red-400 font-mono text-sm mb-2",children:(l=this.state.error)==null?void 0:l.toString()}),this.state.errorInfo&&r.jsx("pre",{className:"text-gray-400 text-xs overflow-auto",children:this.state.errorInfo.componentStack})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Reload Extension"}),r.jsx("button",{onClick:()=>{chrome.storage.local.clear(),window.location.reload()},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Clear Storage & Reload"})]}),r.jsx("div",{className:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded",children:r.jsxs("p",{className:"text-yellow-400 text-sm",children:[r.jsx("strong",{children:"Debug tip:"})," Open DevTools (right-click → Inspect) to see more details in the Console tab."]})})]})}):this.props.children}}console.log("=== Sidepanel Loading ===");var vr;console.log("Extension ID:",(vr=chrome.runtime)==null?void 0:vr.id);console.log("Location:",window.location.href);const Ht=()=>r.jsx(Rt,{children:r.jsx(Or,{children:r.jsx(St,{})})}),ur=document.getElementById("sidepanel-root");ur?(console.log("Root container found, rendering app..."),Hr(ur).render(r.jsx(Ht,{}))):console.error("Root container not found!");
