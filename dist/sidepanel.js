import"./chunks/modulepreload-polyfill-B5Qt9EMX.js";import{r as h,j as e,c as A}from"./chunks/globals-DXcH-vAE.js";const E={ui:{activeSection:"chatbox",leftNavCollapsed:!1,rightSidebarVisible:!1},chat:{messages:[],sources:[],isLoading:!1},mcp:{connections:[],isLoading:!1},autoConnect:{rules:[],isLoading:!1}};function _(t,s){switch(s.type){case"SET_ACTIVE_SECTION":return{...t,ui:{...t.ui,activeSection:s.payload,rightSidebarVisible:s.payload==="chatbox"?t.ui.rightSidebarVisible:!1}};case"TOGGLE_LEFT_NAV":return{...t,ui:{...t.ui,leftNavCollapsed:!t.ui.leftNavCollapsed}};case"SET_RIGHT_SIDEBAR_VISIBLE":return{...t,ui:{...t.ui,rightSidebarVisible:s.payload}};case"ADD_CHAT_MESSAGE":return{...t,chat:{...t.chat,messages:[...t.chat.messages,s.payload]}};case"SET_CHAT_LOADING":return{...t,chat:{...t.chat,isLoading:s.payload}};case"SET_CHAT_SOURCES":return{...t,chat:{...t.chat,sources:s.payload}};case"SET_MCP_CONNECTIONS":return{...t,mcp:{...t.mcp,connections:s.payload}};case"SET_MCP_LOADING":return{...t,mcp:{...t.mcp,isLoading:s.payload}};case"UPDATE_MCP_CONNECTION":return{...t,mcp:{...t.mcp,connections:t.mcp.connections.map(r=>r.id===s.payload.id?{...r,...s.payload.updates}:r)}};case"SET_AUTOCONNECT_RULES":return{...t,autoConnect:{...t.autoConnect,rules:s.payload}};case"SET_AUTOCONNECT_LOADING":return{...t,autoConnect:{...t.autoConnect,isLoading:s.payload}};case"UPDATE_AUTOCONNECT_RULE":return{...t,autoConnect:{...t.autoConnect,rules:t.autoConnect.rules.map(r=>r.id===s.payload.id?{...r,...s.payload.updates}:r)}};case"LOAD_STATE":return{...t,...s.payload};default:return t}}const C=h.createContext(null),D=({children:t})=>{const[s,r]=h.useReducer(_,E);return h.useEffect(()=>{chrome.storage.sync.get(["activeSection","leftNavCollapsed","chatMessages","chatSources","mcpConnections","autoConnectRules"],a=>{a.activeSection&&r({type:"LOAD_STATE",payload:{ui:{activeSection:a.activeSection||"chatbox",leftNavCollapsed:a.leftNavCollapsed||!1,rightSidebarVisible:!1},chat:{messages:a.chatMessages||[],sources:a.chatSources||[],isLoading:!1},mcp:{connections:a.mcpConnections||[],isLoading:!1},autoConnect:{rules:a.autoConnectRules||[],isLoading:!1}}})})},[]),h.useEffect(()=>{chrome.storage.sync.set({activeSection:s.ui.activeSection,leftNavCollapsed:s.ui.leftNavCollapsed,chatMessages:s.chat.messages,chatSources:s.chat.sources,mcpConnections:s.mcp.connections,autoConnectRules:s.autoConnect.rules})},[s]),e.jsx(C.Provider,{value:{state:s,dispatch:r},children:t})},p=()=>{const t=h.useContext(C);if(!t)throw new Error("useAppContext must be used within an AppProvider");return t};function M(){const t=new Uint8Array(32);return crypto.getRandomValues(t),S(t)}async function I(t){const r=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",r);return S(new Uint8Array(a))}function S(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}const f="10krkkatu19r3j5jlm2pk72hq9".trim(),T="rr6a65fq9qm474tjf9e1r30mu33od0mu4n67uh2ml9m2elegmqf".trim(),y="https://ap-southeast-16mxaydeu2.auth.ap-southeast-1.amazoncognito.com".trim(),R="email openid profile".trim(),b=chrome.identity.getRedirectURL();async function $(){try{const t=M(),s=await I(t);await chrome.storage.local.set({codeVerifier:t});const r=["oauth2","authorize"].join("/"),a=new URLSearchParams({client_id:f,response_type:"code",scope:R,redirect_uri:b,identity_provider:"Google",code_challenge:s,code_challenge_method:"S256"}),i=`${y}/${r}?${a.toString()}`;console.log("ðŸ” OAuth Configuration:"),console.log("Cognito Domain:",y),console.log("Client ID:",f),console.log("Redirect URI:",b),console.log("Full Auth URL:",i);const c=await chrome.identity.launchWebAuthFlow({url:i,interactive:!0});if(!c)throw new Error("No redirect URL received");const d=new URL(c).searchParams.get("code");if(!d)throw new Error("No authorization code received");const l=await B(d,t);return await L(l),l}catch(t){throw console.error("Sign in error:",t),t}}async function B(t,s){const r=`${y}/oauth2/token`,a=new URLSearchParams({grant_type:"authorization_code",client_id:f,client_secret:T,code:t,redirect_uri:b,code_verifier:s}),i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString()});if(!i.ok){const o=await i.text();throw new Error(`Token exchange failed: ${o}`)}const c=await i.json();return{accessToken:c.access_token,idToken:c.id_token,refreshToken:c.refresh_token,expiresAt:Date.now()+c.expires_in*1e3}}async function L(t){await chrome.storage.local.set({authTokens:t,isAuthenticated:!0})}async function v(){return(await chrome.storage.local.get(["authTokens"])).authTokens||null}async function O(){const t=await v();if(!t)return!1;if(Date.now()>=t.expiresAt)try{return await P(),!0}catch{return!1}return!0}async function P(){const t=await v();if(!(t!=null&&t.refreshToken))throw new Error("No refresh token available");const s=`${y}/oauth2/token`,r=new URLSearchParams({grant_type:"refresh_token",client_id:f,client_secret:T,refresh_token:t.refreshToken}),a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!a.ok)throw new Error("Token refresh failed");const i=await a.json(),c={accessToken:i.access_token,idToken:i.id_token,refreshToken:t.refreshToken,expiresAt:Date.now()+i.expires_in*1e3};return await L(c),c}async function U(){const t=await v();if(!(t!=null&&t.idToken))return null;try{const s=t.idToken.split(".")[1],r=JSON.parse(atob(s));return{email:r.email,name:r.name,picture:r.picture,sub:r.sub}}catch(s){return console.error("Error decoding user info:",s),null}}async function V(){await chrome.storage.local.remove(["authTokens","isAuthenticated","codeVerifier"])}function H(){const[t,s]=h.useState(!0),[r,a]=h.useState(!1),[i,c]=h.useState(null),o=async()=>{s(!0);try{const l=await O();if(a(l),l){const n=await U();c(n)}}catch(l){console.error("Auth check failed:",l),a(!1),c(null)}finally{s(!1)}};return h.useEffect(()=>{o();const l=n=>{n.isAuthenticated&&o()};return chrome.storage.onChanged.addListener(l),()=>{chrome.storage.onChanged.removeListener(l)}},[]),{isAuthChecking:t,isLoggedIn:r,user:i,signOut:async()=>{await V(),a(!1),c(null)},refreshAuth:o}}const W=({leftNavCollapsed:t,rightSidebarVisible:s,children:r,leftNavigation:a,rightSidebar:i})=>{const c=s&&i;return e.jsxs("div",{className:"h-screen bg-gray-900 text-white flex overflow-hidden relative",children:[e.jsx("div",{className:`
        bg-gray-800 border-r border-gray-700 transition-all duration-300 flex-shrink-0
        ${t?"w-16":"w-64"}
      `,children:a}),e.jsxs("div",{className:"flex-1 flex min-w-0 relative",children:[e.jsx("div",{className:"flex-1 overflow-hidden relative",children:r}),c&&e.jsx("div",{className:"flex-shrink-0",children:i})]})]})},z=[{id:"chatbox",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),label:"ChatBox",tooltip:"TrÃ² chuyá»‡n vá»›i AI"},{id:"mcp",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),label:"MCP Management",tooltip:"Quáº£n lÃ½ Káº¿t ná»‘i MCP"},{id:"autoconnect",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"Auto-Connect",tooltip:"TÃ¡c nháº­n tá»± Ä‘á»™ng"}],G=()=>{const{state:t,dispatch:s}=p(),{activeSection:r,leftNavCollapsed:a}=t.ui,i=o=>{s({type:"SET_ACTIVE_SECTION",payload:o})},c=()=>{s({type:"TOGGLE_LEFT_NAV"})};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[!a&&e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Extension"}),e.jsx("button",{onClick:c,className:"p-2 rounded-lg hover:bg-gray-700 transition-colors text-gray-400 hover:text-white",title:a?"Expand sidebar":"Collapse sidebar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M9 5l7 7-7 7":"M15 19l-7-7 7-7"})})})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:z.map(o=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>i(o.id),className:`
                  w-full flex items-center p-3 rounded-lg transition-all duration-200
                  ${r===o.id?"bg-blue-600 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                  ${a?"justify-center":"justify-start"}
                `,title:a?o.tooltip:"",children:[e.jsx("span",{className:"flex-shrink-0",children:o.icon}),!a&&e.jsx("span",{className:"ml-3 text-sm font-medium",children:o.label})]})},o.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:`flex items-center ${a?"justify-center":"justify-between"}`,children:[!a&&e.jsx("div",{className:"text-xs text-gray-400",children:"v1.0.0"}),e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-700 transition-colors text-gray-400 hover:text-white",title:"Settings",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]})},F=({visible:t,content:s,sources:r=[]})=>{if(!t||s==="none")return null;const a=o=>{switch(o){case"document":return"ðŸ“„";case"file":return"ðŸ“";case"web":return"ðŸŒ";case"chat":return"ðŸ’¬";default:return"ðŸ“„"}},i=o=>o?` â€¢ ${o}`:"",c=o=>{const d=new Date,l=new Date(o),n=d.getTime()-l.getTime(),u=Math.floor(n/(1e3*60)),x=Math.floor(n/(1e3*60*60)),m=Math.floor(n/(1e3*60*60*24));return u<1?"Vá»«a xong":u<60?`${u} phÃºt trÆ°á»›c`:x<24?`${x} giá» trÆ°á»›c`:`${m} ngÃ y trÆ°á»›c`};return e.jsx("div",{className:"w-80 sm:w-72 md:w-80 bg-gray-800 border-l border-gray-700 flex-shrink-0 h-full overflow-hidden",children:s==="sources"&&e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Nguá»“n gáº§n Ä‘Ã¢y"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"TÃ i liá»‡u vÃ  tá»‡p Ä‘Ã£ sá»­ dá»¥ng"})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ChÆ°a cÃ³ nguá»“n dá»¯ liá»‡u nÃ o"})]}):e.jsx("div",{className:"p-4 space-y-3",children:r.map(o=>e.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:a(o.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-white truncate",children:o.name}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[c(o.timestamp),i(o.size)]}),o.path&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:o.path})]})]})},o.id))})}),e.jsxs("div",{className:"p-4 space-y-3 border-t border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"TÃ i liá»‡u máº«u"}),e.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:"ðŸ“„"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Banking Terms"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Credit_Default_Swap.pdf"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Sá»­ dá»¥ng 2 phÃºt trÆ°á»›c"})]})]})}),e.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:"ðŸ“Š"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Finance Docs"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"derivatives_overview.docx"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Sá»­ dá»¥ng 15 phÃºt trÆ°á»›c"})]})]})}),e.jsx("div",{className:"bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:"ðŸ’¬"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Team Chat"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"#finance-discussion"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Sá»­ dá»¥ng 1 giá» trÆ°á»›c"})]})]})})]})]})})},q=({message:t})=>{const s=t.sender==="user";return e.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-4`,children:e.jsxs("div",{className:`max-w-[80%] ${s?"order-2":"order-1"}`,children:[!s&&e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mr-2",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("span",{className:"text-sm text-gray-400",children:"AI Assistant"})]}),e.jsxs("div",{className:`
          rounded-2xl px-4 py-3 text-sm
          ${s?"bg-blue-600 text-white rounded-br-md":"bg-gray-800 text-gray-100 rounded-bl-md border border-gray-700"}
        `,children:[e.jsx("p",{className:"whitespace-pre-wrap",children:t.content}),t.sources&&t.sources.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:"Nguá»“n dá»¯ liá»‡u tham kháº£o:"}),e.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:e.jsxs("div",{className:"flex items-center text-xs text-gray-300",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“„"}),e.jsx("span",{className:"flex-1",children:t.sources[0].name})]})})]})]}),e.jsx("div",{className:`text-xs text-gray-500 mt-1 ${s?"text-right":"text-left"}`,children:new Date(t.timestamp).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})})},K=({onSendMessage:t,disabled:s=!1})=>{const[r,a]=h.useState(""),i=h.useRef(null),c=l=>{l.preventDefault(),r.trim()&&!s&&(t(r),a(""),i.current&&(i.current.style.height="auto"))},o=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),c(l))},d=l=>{a(l.target.value),i.current&&(i.current.style.height="auto",i.current.style.height=`${i.current.scrollHeight}px`)};return h.useEffect(()=>{i.current&&i.current.focus()},[]),e.jsxs("form",{onSubmit:c,className:"flex items-end space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{ref:i,value:r,onChange:d,onKeyDown:o,placeholder:"Há»i báº¥t cá»© Ä‘iá»u gÃ¬ vá» nguá»“n dá»¯ liá»‡u...",disabled:s,className:"w-full bg-gray-800 border border-gray-600 rounded-2xl px-4 py-3 pr-12 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px] max-h-32",rows:1}),e.jsx("button",{type:"button",className:"absolute right-3 bottom-3 p-1 text-gray-400 hover:text-gray-300 transition-colors",title:"ÄÃ­nh kÃ¨m tá»‡p",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})})]}),e.jsx("button",{type:"submit",disabled:!r.trim()||s,className:"flex-shrink-0 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white p-3 rounded-2xl transition-colors",title:"Gá»­i tin nháº¯n",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})},w=()=>{const{state:t,dispatch:s}=p(),{messages:r,isLoading:a}=t.chat,{rightSidebarVisible:i}=t.ui,c=h.useRef(null),o=()=>{var n;(n=c.current)==null||n.scrollIntoView({behavior:"smooth"})};h.useEffect(()=>{o()},[r]);const d=()=>{s({type:"SET_RIGHT_SIDEBAR_VISIBLE",payload:!i})},l=async n=>{if(!n.trim())return;const u={id:Date.now().toString(),content:n.trim(),sender:"user",timestamp:new Date};s({type:"ADD_CHAT_MESSAGE",payload:u}),s({type:"SET_CHAT_LOADING",payload:!0}),setTimeout(()=>{const x={id:(Date.now()+1).toString(),content:`TÃ´i hiá»ƒu báº¡n Ä‘Ã£ há»i: "${n}". ÄÃ¢y lÃ  má»™t pháº£n há»“i máº«u tá»« AI. Trong thá»±c táº¿, Ä‘iá»u nÃ y sáº½ Ä‘Æ°á»£c káº¿t ná»‘i vá»›i má»™t dá»‹ch vá»¥ AI thá»±c sá»±.`,sender:"ai",timestamp:new Date,sources:[{id:"1",name:"Credit_Default_Swap.pdf",type:"document",timestamp:new Date,icon:"ðŸ“„",size:"2.3 MB"}]};s({type:"ADD_CHAT_MESSAGE",payload:x}),s({type:"SET_CHAT_LOADING",payload:!1})},1500)};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-900",children:[e.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"TrÃ² chuyá»‡n vá»›i AI"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Há»i báº¥t cá»© Ä‘iá»u gÃ¬ vá» dá»¯ liá»‡u káº¿t ná»‘i"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:d,className:`
                flex items-center text-xs px-3 py-1.5 rounded-full border transition-all duration-200
                ${i?"text-blue-400 bg-blue-500/20 border-blue-500/40 shadow-sm":"text-gray-400 bg-gray-500/10 border-gray-500/20 hover:text-blue-400 hover:bg-blue-500/10 hover:border-blue-500/20"}
              `,title:i?"áº¨n nguá»“n gáº§n Ä‘Ã¢y":"Hiá»‡n nguá»“n gáº§n Ä‘Ã¢y",children:[e.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"font-medium",children:"Nguá»“n"}),e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ml-1.5 transition-colors ${i?"bg-blue-400":"bg-green-500"}`})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"+ Cuá»™c trÃ² chuyá»‡n má»›i"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:r.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Báº¯t Ä‘áº§u cuá»™c trÃ² chuyá»‡n"}),e.jsx("p",{className:"text-gray-400 max-w-md",children:"Há»i tÃ´i vá» báº¥t ká»³ Ä‘iá»u gÃ¬ liÃªn quan Ä‘áº¿n dá»¯ liá»‡u cá»§a báº¡n, tÃ i liá»‡u hoáº·c cÃ¡c káº¿t ná»‘i MCP."})]})}):e.jsxs(e.Fragment,{children:[r.map(n=>e.jsx(q,{message:n},n.id)),a&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm",children:"AI Ä‘ang tráº£ lá»i..."})]}),e.jsx("div",{ref:c})]})}),e.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-700",children:e.jsx(K,{onSendMessage:l,disabled:a})})]})},Q=({connection:t,onToggle:s,onConfigure:r,onDelete:a})=>{const i=d=>{switch(d){case"connected":return"text-green-400 bg-green-400/10";case"syncing":return"text-yellow-400 bg-yellow-400/10";case"disconnected":return"text-gray-400 bg-gray-400/10";case"error":return"text-red-400 bg-red-400/10";default:return"text-gray-400 bg-gray-400/10"}},c=d=>{switch(d){case"connected":return"Connected";case"syncing":return"Syncing";case"disconnected":return"Disconnected";case"error":return"Error";default:return"Unknown"}},o=d=>{const l=new Date,n=new Date(d),u=l.getTime()-n.getTime(),x=Math.floor(u/(1e3*60)),m=Math.floor(u/(1e3*60*60)),g=Math.floor(u/(1e3*60*60*24));return x<1?"Just now":x<60?`${x} minutes ago`:m<24?`${m} hour${m>1?"s":""} ago`:`${g} day${g>1?"s":""} ago`};return e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-gray-600 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-400",children:t.description})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(t.status)}`,children:e.jsxs("div",{className:"flex items-center space-x-1",children:[t.status==="syncing"&&e.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-pulse"}),e.jsx("span",{children:c(t.status)})]})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Last sync: ",o(t.lastSync)]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Configure",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsx("button",{onClick:s,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t.status==="connected"||t.status==="syncing"?"bg-blue-600":"bg-gray-600"}`,disabled:t.status==="syncing",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.status==="connected"||t.status==="syncing"?"translate-x-6":"translate-x-1"}`})})]})]})},J=()=>{const{state:t}=p(),{connections:s,isLoading:r}=t.mcp,a=[{id:"1",name:"Local Files",type:"local-files",status:"connected",lastSync:new Date(Date.now()-2*60*1e3),description:"Desktop & Documents",icon:"ðŸ“",settings:{}},{id:"2",name:"SharePoint",type:"sharepoint",status:"connected",lastSync:new Date(Date.now()-60*60*1e3),description:"Corporate Documents",icon:"ðŸ¢",settings:{}},{id:"3",name:"Confluence",type:"confluence",status:"disconnected",lastSync:new Date(Date.now()-3*24*60*60*1e3),description:"Wiki & Knowledge Base",icon:"ðŸ“š",settings:{}},{id:"4",name:"Google Drive",type:"google-drive",status:"connected",lastSync:new Date(Date.now()-30*60*1e3),description:"Cloud Storage",icon:"â˜ï¸",settings:{}},{id:"5",name:"Notion",type:"notion",status:"syncing",lastSync:new Date(Date.now()-5*60*1e3),description:"Workspace & Notes",icon:"ðŸ“",settings:{}},{id:"6",name:"Slack",type:"slack",status:"connected",lastSync:new Date(Date.now()-15*60*1e3),description:"Team Communication",icon:"ðŸ’¬",settings:{}}],i=s.length>0?s:a,c=()=>{console.log("Add new connection")},o=n=>{console.log("Toggle connection:",n)},d=n=>{console.log("Configure connection:",n)},l=n=>{console.log("Delete connection:",n)};return r?e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Äang táº£i káº¿t ná»‘i MCP..."})]})}):e.jsxs("div",{className:"h-full bg-gray-900 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 p-6 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Quáº£n lÃ½ Káº¿t ná»‘i MCP"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Káº¿t ná»‘i vÃ  quáº£n lÃ½ cÃ¡c nguá»“n dá»¯ liá»‡u bÃªn ngoÃ i"})]}),e.jsxs("button",{onClick:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"ThÃªm Káº¿t ná»‘i"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"ChÆ°a cÃ³ káº¿t ná»‘i nÃ o"}),e.jsx("p",{className:"text-gray-400 max-w-md mb-4",children:"ThÃªm káº¿t ná»‘i MCP Ä‘á»ƒ truy cáº­p dá»¯ liá»‡u tá»« cÃ¡c nguá»“n bÃªn ngoÃ i nhÆ° SharePoint, Google Drive, Notion vÃ  nhiá»u hÆ¡n ná»¯a."}),e.jsx("button",{onClick:c,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"ThÃªm Káº¿t ná»‘i Äáº§u tiÃªn"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(n=>e.jsx(Q,{connection:n,onToggle:()=>o(n.id),onConfigure:()=>d(n.id),onDelete:()=>l(n.id)},n.id))})})]})},X=({rule:t,onToggle:s,onEdit:r,onDelete:a})=>{const i=n=>{switch(n){case"translation":return"ðŸŒ";case"content-writer":return"âœï¸";case"data-analysis":return"ðŸ“Š";default:return"âš¡"}},c=n=>{switch(n){case"translation":return"bg-blue-500/10 text-blue-400";case"content-writer":return"bg-purple-500/10 text-purple-400";case"data-analysis":return"bg-green-500/10 text-green-400";default:return"bg-gray-500/10 text-gray-400"}},o=n=>n==="active"?"Active":"Inactive",d=n=>{if(!n)return"Never run";const u=new Date,x=new Date(n),m=u.getTime()-x.getTime(),g=Math.floor(m/(1e3*60)),j=Math.floor(m/(1e3*60*60)),N=Math.floor(m/(1e3*60*60*24));return g<1?"Just now":g<60?`${g} minutes ago`:j<24?`${j} hour${j>1?"s":""} ago`:`${N} day${N>1?"s":""} ago`},l=n=>{switch(n.type){case"url-pattern":return`URL matches: ${n.value}`;case"content-type":return`Content type: ${n.value}`;case"schedule":return`Schedule: ${n.value}`;default:return n.value}};return e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-gray-600 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"text-2xl mt-1",children:i(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(t.type)}`,children:t.type.replace("-"," ")})]}),e.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:t.description})]})]}),e.jsx("button",{onClick:s,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t.status==="active"?"bg-blue-600":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.status==="active"?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:`font-medium ${t.status==="active"?"text-green-400":"text-gray-400"}`,children:o(t.status)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Trigger:"}),e.jsx("span",{className:"text-gray-300 text-right max-w-xs truncate",children:l(t.trigger)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Last run:"}),e.jsx("span",{className:"text-gray-300",children:d(t.lastRun)})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Edit Rule",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",title:"Delete Rule",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Rule #",t.id]})]})]})},Y=()=>{const{state:t}=p(),{rules:s,isLoading:r}=t.autoConnect,a=[{id:"1",name:"Há»— trá»£ dá»‹ch thuáº­t",description:"GiÃºp báº¡n dá»‹ch nhanh vÃ  chÃ­nh xÃ¡c cÃ¡c tÃ i liá»‡u tá»« nhiá»u ngÃ´n ngá»¯ khÃ¡c nhau.",type:"translation",status:"active",trigger:{type:"url-pattern",value:"*translate*"},action:{type:"auto-translate",config:{targetLanguage:"vi"}},lastRun:new Date(Date.now()-30*60*1e3)},{id:"2",name:"Content Writer",description:"GiÃºp báº¡n sÃ¡ng táº¡o vÃ  tá»‘i Æ°u ná»™i dung cho nhiá»u má»¥c Ä‘Ã­ch khÃ¡c nhau.",type:"content-writer",status:"active",trigger:{type:"content-type",value:"text/html"},action:{type:"content-optimization",config:{style:"professional"}},lastRun:new Date(Date.now()-2*60*60*1e3)},{id:"3",name:"PhÃ¢n tÃ­ch dá»¯ liá»‡u",description:"GiÃºp báº¡n phÃ¢n tÃ­ch dá»¯ liá»‡u, táº¡o bÃ¡o cÃ¡o vÃ  rÃºt ra nhá»¯ng insight quan trá»ng Ä‘á»ƒ há»— trá»£ quyáº¿t Ä‘á»‹nh.",type:"data-analysis",status:"inactive",trigger:{type:"schedule",value:"0 9 * * 1"},action:{type:"data-report",config:{format:"pdf"}}}],i=s.length>0?s:a,c=()=>{console.log("Create new rule")},o=n=>{console.log("Toggle rule:",n)},d=n=>{console.log("Edit rule:",n)},l=n=>{console.log("Delete rule:",n)};return r?e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Äang táº£i quy táº¯c tá»± Ä‘á»™ng..."})]})}):e.jsxs("div",{className:"h-full bg-gray-900 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 p-6 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"TÃ¡c nháº­n tá»± Ä‘á»™ng"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Quáº£n lÃ½ tÃ¡c nháº­n tá»± Ä‘á»™ng"})]}),e.jsxs("button",{onClick:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Táº¡o Má»›i"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"ChÆ°a cÃ³ quy táº¯c tá»± Ä‘á»™ng nÃ o"}),e.jsx("p",{className:"text-gray-400 max-w-md mb-4",children:"Táº¡o quy táº¯c tá»± Ä‘á»™ng Ä‘á»ƒ há»‡ thá»‘ng cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ má»™t cÃ¡ch tá»± Ä‘á»™ng dá»±a trÃªn Ä‘iá»u kiá»‡n báº¡n Ä‘áº·t ra."}),e.jsx("button",{onClick:c,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Táº¡o Quy táº¯c Äáº§u tiÃªn"})]})}):e.jsx("div",{className:"space-y-4",children:i.map(n=>e.jsx(X,{rule:n,onToggle:()=>o(n.id),onEdit:()=>d(n.id),onDelete:()=>l(n.id)},n.id))})})]})},Z=({onLoginSuccess:t})=>{const[s,r]=h.useState(!1),[a,i]=h.useState(null),c=async()=>{r(!0),i(null);try{await $(),t()}catch(o){console.error("Login failed:",o),i(o instanceof Error?o.message:"Failed to sign in")}finally{r(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to continue"})]}),a&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:a})}),e.jsxs("button",{onClick:c,disabled:s,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s?e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"}):e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{className:"text-gray-700 font-medium",children:s?"Signing in...":"Sign in with Google"})]}),e.jsx("p",{className:"mt-6 text-xs text-center text-gray-500",children:"By signing in, you agree to our Terms of Service and Privacy Policy"})]})})},ee=()=>{const{state:t}=p(),{activeSection:s,leftNavCollapsed:r,rightSidebarVisible:a}=t.ui,{sources:i}=t.chat,{isAuthChecking:c,isLoggedIn:o,refreshAuth:d}=H(),l=()=>{switch(s){case"chatbox":return e.jsx(w,{});case"mcp":return e.jsx(J,{});case"autoconnect":return e.jsx(Y,{});default:return e.jsx(w,{})}},n=()=>s==="chatbox"?e.jsx(F,{visible:a,content:"sources",sources:i}):null;return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):o?e.jsx(W,{activeSection:s,leftNavCollapsed:r,rightSidebarVisible:a,leftNavigation:e.jsx(G,{}),rightSidebar:n(),children:l()}):e.jsx(Z,{onLoginSuccess:d})},te=()=>e.jsx(D,{children:e.jsx(ee,{})}),k=document.getElementById("sidepanel-root");k&&A(k).render(e.jsx(te,{}));
